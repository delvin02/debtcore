import{_ as pe,a as ge,b as he,c as we,d as ye,e as ne,u as A,f as be,g as ve,h as $e,i as te,j as G,k as xe,l as Se,m as Ce,n as Ve,o as ke,p as De,q as Fe,r as Le,F as ae,z as D,s as se}from"./Checkbox.vue_vue_type_script_setup_true_lang.B1OsCrsj.js";import{aI as Pe,e as V,x as M,ak as Ie,o as d,l as f,k as i,a as s,u as e,d as c,c as u,v as L,F as x,an as j,g as U,P as Re,b as m,t as v,am as Y,f as E,aJ as Me,aK as Ue,Q as oe,aL as Be,aM as Te,r as H,s as C,y as ie,z as re,A as de,m as T,B as ee,i as R,C as ze,D as N,$ as K,E as O,G as ce,I as je,J as ue,K as He,L as fe,M as Q,n as z,N as q,O as X,T as Z,U as Ne,V as Ke,W as Ae,X as Ye,Y as Ee,Z as me,a1 as Ge,a2 as W,a3 as qe,a4 as We,a5 as Je,_ as J,a6 as Oe,a7 as p,a8 as Qe,a9 as Xe}from"../main.js";import{_ as Ze,a as et}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang.CMtdOpeP.js";import{_ as _e}from"./Input.vue_vue_type_script_setup_true_lang.CydXMrwJ.js";import{_ as tt,a as at,b as le,d as st,c as lt,e as nt,f as ot,g as it}from"./RangeCalendarHeadCell.vue_vue_type_script_setup_true_lang.CWhwLAXD.js";import{C as rt,a as dt,_ as ct}from"./CalendarPrevButton.vue_vue_type_script_setup_true_lang.BhXjXo8B.js";import{_ as ut}from"./lodash.BtnTHUG3.js";import{_ as ft}from"./DialogFooter.vue_vue_type_script_setup_true_lang.CUbi7heN.js";import"./index.5qndC0qu.js";/**
 * @license lucide-vue-next v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Pe("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),_t={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},pt=V({__name:"RangeCalendar",props:{defaultPlaceholder:{},defaultValue:{},modelValue:{},placeholder:{},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},calendarLabel:{},fixedWeeks:{type:Boolean},maxValue:{},minValue:{},locale:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{type:Function},isDateUnavailable:{type:Function},dir:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(t,{emit:a}){const l=t,n=a,o=M(()=>{const{class:w,...F}=l;return F}),r=Ie(o,n);return(w,F)=>(d(),f(e(Re),j({class:e(U)("p-3",l.class)},e(r)),{default:i(({grid:P,weekDays:k})=>[s(e(gt),null,{default:i(()=>[s(e(yt)),s(e(ht)),s(e(wt))]),_:1}),c("div",_t,[(d(!0),u(x,null,L(P,_=>(d(),f(e(tt),{key:_.value.toString()},{default:i(()=>[s(e(at),null,{default:i(()=>[s(e(le),null,{default:i(()=>[(d(!0),u(x,null,L(k,S=>(d(),f(e(st),{key:S},{default:i(()=>[m(v(S),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),s(e(lt),null,{default:i(()=>[(d(!0),u(x,null,L(_.rows,(S,b)=>(d(),f(e(le),{key:`weekDate-${b}`,class:"mt-2 w-full"},{default:i(()=>[(d(!0),u(x,null,L(S,g=>(d(),f(e(nt),{key:g.toString(),date:g},{default:i(()=>[s(e(ot),{day:g,month:_.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}}),gt=V({__name:"RangeCalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,l=M(()=>{const{class:o,...r}=a;return r}),n=Y(l);return(o,r)=>(d(),f(e(Me),j({class:e(U)("relative flex w-full items-center justify-between pt-1",a.class)},e(n)),{default:i(()=>[E(o.$slots,"default")]),_:3},16,["class"]))}}),ht=V({__name:"RangeCalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,l=M(()=>{const{class:o,...r}=a;return r}),n=Y(l);return(o,r)=>(d(),f(e(Ue),j({class:e(U)("text-sm font-medium",a.class)},e(n)),{default:i(({headingValue:w})=>[E(o.$slots,"default",{headingValue:w},()=>[m(v(w),1)])]),_:3},16,["class"]))}}),wt=V({__name:"RangeCalendarNextButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,l=M(()=>{const{class:o,...r}=a;return r}),n=Y(l);return(o,r)=>(d(),f(e(Be),j({class:e(U)(e(oe)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.class)},e(n)),{default:i(()=>[E(o.$slots,"default",{},()=>[s(e(rt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),yt=V({__name:"RangeCalendarPrevButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const a=t,l=M(()=>{const{class:o,...r}=a;return r}),n=Y(l);return(o,r)=>(d(),f(e(Te),j({class:e(U)(e(oe)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.class)},e(n)),{default:i(()=>[E(o.$slots,"default",{},()=>[s(e(dt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),bt={class:"flex items-center justify-between px-2 pb-10"},vt={class:"flex-1 text-sm text-muted-foreground"},$t={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},xt={class:"flex items-center space-x-2"},St=c("p",{class:"text-sm font-medium"},"Rows per page",-1),Ct={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Vt={class:"flex items-center space-x-2"},kt=c("span",{class:"sr-only"},"Go to first page",-1),Dt=c("span",{class:"sr-only"},"Go to previous page",-1),Ft=c("span",{class:"sr-only"},"Go to next page",-1),Lt=c("span",{class:"sr-only"},"Go to last page",-1),Pt=V({__name:"DataTablePagination",props:{table:{}},setup(t){return(a,l)=>{const n=H("VIcon");return d(),u("div",bt,[c("div",vt,v(a.table.getFilteredSelectedRowModel().rows.length)+" of "+v(a.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",$t,[c("div",xt,[St,s(e(we),{"model-value":`${a.table.getState().pagination.pageSize}`,"onUpdate:modelValue":a.table.setPageSize},{default:i(()=>[s(e(pe),{class:"h-8 w-[70px]"},{default:i(()=>[s(e(ge),{placeholder:`${a.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),s(e(he),{side:"top"},{default:i(()=>[(d(),u(x,null,L([10,20,30,40,50],o=>s(e(ye),{key:o,value:`${o}`},{default:i(()=>[m(v(o),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",Ct," Page "+v(a.table.getState().pagination.pageIndex+1)+" of "+v(a.table.getPageCount()),1),c("div",Vt,[s(e(C),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanPreviousPage(),onClick:l[0]||(l[0]=o=>a.table.setPageIndex(0))},{default:i(()=>[kt,s(n,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),s(e(C),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanPreviousPage(),onClick:l[1]||(l[1]=o=>a.table.previousPage())},{default:i(()=>[Dt,s(n,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),s(e(C),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanNextPage(),onClick:l[2]||(l[2]=o=>a.table.nextPage())},{default:i(()=>[Ft,s(n,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),s(e(C),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanNextPage(),onClick:l[3]||(l[3]=o=>a.table.setPageIndex(a.table.getPageCount()-1))},{default:i(()=>[Lt,s(n,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),It=V({__name:"DataTableViewOptions",props:{table:{}},setup(t){const a=t;console.log(a.table.getAllColumns());const l=M(()=>a.table.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide()));return console.log(l),(n,o)=>(d(),f(e(de),null,{default:i(()=>[s(e(ie),{"as-child":""},{default:i(()=>[s(e(C),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:i(()=>[m(" View ")]),_:1})]),_:1}),s(e(re),{align:"end",class:"w-[150px]"},{default:i(()=>[s(e(Ze),null,{default:i(()=>[m("Toggle columns")]),_:1}),s(e(ne)),(d(!0),u(x,null,L(l.value,r=>(d(),f(e(et),{key:r.id,class:"capitalize",checked:r.getIsVisible(),"onUpdate:checked":w=>r.toggleVisibility(!!w)},{default:i(()=>{var w;return[m(v(((w=r.columnDef.meta)==null?void 0:w.title)||r.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),Rt={class:"flex items-center justify-between"},Mt={class:"flex flex-1 items-center space-x-2"},Ut=V({__name:"DataTableToolbar",props:{table:{}},setup(t){const a=t,l=M(()=>a.table.getState().columnFilters.length>0);return(n,o)=>{var r;return d(),u("div",Rt,[c("div",Mt,[s(e(_e),{placeholder:"Search...","model-value":((r=n.table.getColumn("invoice"))==null?void 0:r.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:o[0]||(o[0]=w=>n.table.setGlobalFilter(w.target.value))},null,8,["model-value"]),l.value?(d(),f(e(C),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:o[1]||(o[1]=w=>n.table.resetColumnFilters())},{default:i(()=>[m(" Reset ")]),_:1})):T("",!0)]),s(It,{table:n.table},null,8,["table"])])}}}),Bt={class:"space-y-4 text-muted-foreground"},Tt={class:"rounded-md border"},zt=V({__name:"DataTable",props:{columns:{},data:{}},setup(t){const a=ee("tableStore",A("session")),l=t,n=R([]),o=R([]),r=R({}),w=R({pageIndex:a.page_index,pageSize:a.page_size}),F=R();function P(_,S){let b;typeof _=="function"?b=_(S.value):b=_,S.value=b,a.set_page_index(b.pageIndex),a.set_page_size(b.pageSize)}const k=be({get data(){return l.data},get columns(){return l.columns},state:{get sorting(){return n.value},get columnFilters(){return o.value},get columnVisibility(){return r.value},get rowSelection(){return F.value},get pagination(){return w.value}},enableRowSelection:!0,onSortingChange:_=>N(_,n),onPaginationChange:_=>P(_,w),onColumnFiltersChange:_=>N(_,o),onColumnVisibilityChange:_=>N(_,r),onRowSelectionChange:_=>N(_,F),getCoreRowModel:Se(),getFilteredRowModel:Ce(),getPaginationRowModel:Ve(),getSortedRowModel:ke(),getFacetedRowModel:De(),getFacetedUniqueValues:Fe()});return ze(()=>{k.setPageIndex(a.page_index),k.setPageSize(a.page_size)}),(_,S)=>(d(),u("div",Bt,[s(Ut,{table:e(k)},null,8,["table"]),c("div",Tt,[s(e(xe),{class:"text-xs"},{default:i(()=>[s(e(ve),null,{default:i(()=>[(d(!0),u(x,null,L(e(k).getHeaderGroups(),b=>(d(),f(e(G),{key:b.id},{default:i(()=>[(d(!0),u(x,null,L(b.headers,g=>(d(),f(e(Le),{key:g.id},{default:i(()=>[g.isPlaceholder?T("",!0):(d(),f(e(ae),{key:0,render:g.column.columnDef.header,props:g.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),s(e($e),{id:"dbTableBody"},{default:i(()=>{var b;return[(b=e(k).getRowModel().rows)!=null&&b.length?(d(!0),u(x,{key:0},L(e(k).getRowModel().rows,g=>(d(),f(e(G),{key:g.id,"data-state":g.getIsSelected()&&"selected"},{default:i(()=>[(d(!0),u(x,null,L(g.getVisibleCells(),y=>(d(),f(e(te),{key:y.id},{default:i(()=>[s(e(ae),{render:y.column.columnDef.cell,props:y.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(d(),f(e(G),{key:1},{default:i(()=>[s(e(te),{colspan:_.columns.length,class:"h-24 text-center"},{default:i(()=>[m(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),s(Pt,{table:e(k)},null,8,["table"])]))}}),jt={class:"border border-secondary rounded p-4"},Ht={class:"flex flex-col gap-4"},Nt={class:"flex flex-row gap-x-2 justify-items-center items-center mx-auto w-full"},Kt=c("div",{class:"w-1/3 text-right my-auto"},[c("p",null,"Schduled Date")],-1),At={class:"flex flex-row gap-x-2 justify-items-center items-center mx-auto w-full"},Yt=c("div",{class:"w-1/3 text-right my-auto"},[c("p",null,"Company")],-1),Et={class:"flex self-end justify-end justify-self-end"},Gt={class:"flex justify-end space-x-2"},qt=V({__name:"DashboardCard",setup(t){const a=ee("tableStore",A("session")),l=new K(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),n=R({start:new K(2024,5,20).subtract({months:3}),end:l}),o=O({date:n.value,company:null}),r=O({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),{toast:w}=ce(),F=R("");async function P(g){r.is_loading=!0;try{const y=await fe.get(`/api/company/list?search=${g||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});r.data=y.data.Result}catch{w({title:"Whoops, something went wrong",description:"There is an error fetching the companies.",variant:"destructive"})}finally{r.is_loading=!1}}je(F,ut.debounce(async g=>{await P(g)},300));const k=()=>{a.set_filter(o),a.refresh(a.page_index)},_=()=>{a.set_filter({}),a.refresh(a.page_index)};ue(()=>{P()});const S=new He("en-US",{dateStyle:"medium"});function b(g){g.id==o.company?o.company=null:o.company=g.id,r.is_open=!1}return(g,y)=>{const $=H("VIcon");return d(),u("div",jt,[c("div",Ht,[c("div",Nt,[Kt,s(e(Z),null,{default:i(()=>[s(e(Q),{"as-child":""},{default:i(()=>[s(e(C),{variant:"outline",class:z(e(U)("w-1/3 justify-start text-left font-normal",!o.date&&"text-muted-foreground"))},{default:i(()=>[s(e(mt),{class:"mr-2 h-4 w-4"}),o.date.start?(d(),u(x,{key:0},[o.date.end?(d(),u(x,{key:0},[m(v(e(S).format(o.date.start.toDate(e(q)())))+" - "+v(e(S).format(o.date.end.toDate(e(q)()))),1)],64)):(d(),u(x,{key:1},[m(v(e(S).format(o.date.start.toDate(e(q)()))),1)],64))],64)):(d(),u(x,{key:1},[m(" Pick a date ")],64))]),_:1},8,["class"])]),_:1}),s(e(X),{class:"w-auto p-0"},{default:i(()=>[s(e(pt),{modelValue:o.date,"onUpdate:modelValue":y[0]||(y[0]=h=>o.date=h),"initial-focus":"","number-of-months":2,"onUpdate:startValue":y[1]||(y[1]=h=>o.date.start=h)},null,8,["modelValue"])]),_:1})]),_:1})]),c("div",At,[Yt,s(e(Z),{class:"col-span-1",open:r.is_open,"onUpdate:open":y[3]||(y[3]=h=>r.is_open=h)},{default:i(()=>[s(e(Q),{"as-child":""},{default:i(()=>[s(e(C),{variant:"outline",role:"combobox","aria-expanded":r.is_open,class:"w-1/3 justify-between px-3",disabled:r.is_loading},{default:i(()=>{var h;return[m(v(o.company?(h=r.data.find(B=>B.id===o.company))==null?void 0:h.label:"Select company")+" ",1),r.is_loading?(d(),f($,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(d(),f($,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),s(e(X),{class:"w-[500px] p-1"},{default:i(()=>[s(e(Ne),null,{default:i(()=>[s(e(Ke),{class:"h-9",modelValue:F.value,"onUpdate:modelValue":y[2]||(y[2]=h=>F.value=h),placeholder:"Search company..."},null,8,["modelValue"]),s(e(Ae),null,{default:i(()=>[m("No company found.")]),_:1}),s(e(Ye),null,{default:i(()=>[s(e(Ee),null,{default:i(()=>[(d(!0),u(x,null,L(r.data,h=>(d(),f(e(Ge),{key:h.id,value:h.value??"",onSelect:()=>b(h)},{default:i(()=>[m(v(h.label)+" ",1),s($,{name:"fa-check",class:z(["ml-auto h-4 w-4",o.company===h.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),c("div",Et,[s(e(C),{onClick:k,class:"w-[100px]"},{default:i(()=>[m("Filter")]),_:1})]),s(e(me),{class:"my-3"}),c("div",Gt,[s(e(C),{onClick:_,class:"w-[100px]"},{default:i(()=>[m("All")]),_:1})])])}}}),I=V({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(t){return(a,l)=>{const n=H("VIcon");return a.column.getCanSort()?(d(),u("div",{key:0,class:z(e(U)("flex items-center space-x-2",a.$attrs.class??""))},[s(e(de),null,{default:i(()=>[s(e(ie),{"as-child":""},{default:i(()=>[s(e(C),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:i(()=>[c("span",null,v(a.title),1),a.column.getIsSorted()==="desc"?(d(),f(n,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):a.column.getIsSorted()==="asc"?(d(),f(n,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(d(),f(n,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),s(e(re),{align:"start"},{default:i(()=>[s(e(W),{onClick:l[0]||(l[0]=o=>a.column.toggleSorting(!1))},{default:i(()=>[s(n,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Asc ")]),_:1}),s(e(W),{onClick:l[1]||(l[1]=o=>a.column.toggleSorting(!0))},{default:i(()=>[s(n,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Desc ")]),_:1}),s(e(ne)),s(e(W),{onClick:l[2]||(l[2]=o=>a.column.toggleVisibility(!1))},{default:i(()=>[s(n,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(d(),u("div",{key:1,class:z(a.$attrs.class)},v(a.title),3))}}}),Wt=D.object({id:D.number(),invoice:D.string(),company_name:D.string(),customer_name:D.string().min(2).max(50),event_display:D.string(),scheduled_date:D.preprocess(t=>typeof t=="string"?new Date(t):t,D.date()),completed_date:D.string().nullable(),status:D.string(),additional_info:D.string(),change_info:D.string().nullable(),editable:D.boolean()}),Jt={class:"grid gap-4 py-4"},Ot={class:"grid grid-cols-4 items-center gap-4"},Qt={class:"grid grid-cols-4 items-center gap-4"},Xt={class:"col-span-3"},Zt={key:0,class:"grid grid-cols-4 items-center gap-4"},ea=V({__name:"DataTableEditScheduleModal",props:{row:{}},setup(t){const a=ee("sessionStore",A("session")),l=t,n=O({id:l.row.id,invoice:l.row.invoice,scheduled_date:new K(l.row.scheduled_date.getFullYear(),l.row.scheduled_date.getMonth()+1,l.row.scheduled_date.getDate())}),o=R(!1),r=R(!1),w=R(null),{toast:F}=ce(),P=it(new Date,1),k=new K(P.getFullYear(),P.getMonth()+1,P.getDate());function _(){const y=[{condition:n.scheduled_date==null,message:"Schedule Date cannot be blank"}];for(let $ of y)if($.condition)return w.value=$.message,!1;return!0}async function S(){if(_()){o.value=!0;try{const $=await fe.patch(`/api/session/${l.row.id}/scheduled_date`,{...n},{headers:{"Content-Type":"multipart/form-data"}});b(),await a.refresh(a.page_index),F({title:$.data.Result,variant:"success"})}catch{F({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{o.value=!1}}}function b(){r.value=!r.value}function g(y){n.scheduled_date=y}return(y,$)=>{const h=H("VIcon");return d(),u("div",null,[c("div",null,[s(e(C),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:b},{default:i(()=>[s(h,{name:"fa-pen",class:"size-4"})]),_:1})]),s(e(Oe),{open:r.value,"onUpdate:open":$[2]||($[2]=B=>r.value=B)},{default:i(()=>[s(e(qe),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:i(()=>[s(e(We),null,{default:i(()=>[s(e(Je),null,{default:i(()=>[m("Reschedule Reminder")]),_:1})]),_:1}),c("div",Jt,[c("div",Ot,[s(e(J),{for:"invoice",class:"text-right"},{default:i(()=>[m(" Invoice ")]),_:1}),s(e(_e),{id:"invoice",modelValue:n.invoice,"onUpdate:modelValue":$[0]||($[0]=B=>n.invoice=B),class:"col-span-3",disabled:""},null,8,["modelValue"])]),c("div",Qt,[s(e(J),{for:"email",class:"text-right"},{default:i(()=>[m(" Schedule Date ")]),_:1}),c("div",Xt,[s(e(Z),null,{default:i(()=>[s(e(Q),{"as-child":""},{default:i(()=>[s(e(C),{variant:"outline",class:z(e(U)("w-full justify-start text-left font-normal",!n.scheduled_date&&"text-muted-foreground"))},{default:i(()=>[s(h,{name:"bi-calendar-fill",class:"mr-2 size-4"}),c("span",null,v(n.scheduled_date??"Select a date"),1)]),_:1},8,["class"])]),_:1}),s(e(X),{class:"w-auto p-0"},{default:i(()=>[s(e(ct),{mode:"date","min-value":e(k),"model-value":n.scheduled_date,"onUpdate:modelValue":$[1]||($[1]=B=>g(B)),masks:{L:"YYYY-MM-DD"},modelConfig:{type:"string",mask:"YYYY/MM/DD"},"is-required":""},null,8,["min-value","model-value"])]),_:1})]),_:1})])])]),s(me),w.value?(d(),u("div",Zt,[s(e(J),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:i(()=>[s(h,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),m(" "+v(w.value),1)]),_:1})])):T("",!0),s(e(ft),{class:"flex justify-end"},{default:i(()=>[s(e(C),{type:"submit",onClick:S,disabled:o.value},{default:i(()=>[o.value?(d(),f(h,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):T("",!0),m(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),ta={class:"flex gap-1"},aa=V({__name:"DataTableRowActions",props:{row:{}},setup(t){const a=t,l=M(()=>Wt.parse(a.row.original));return(n,o)=>(d(),u("div",ta,[l.value.editable?(d(),f(ea,{key:0,row:l.value},null,8,["row"])):T("",!0)]))}}),sa=[{id:"select",header:({table:t})=>p(se,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":a=>t.toggleAllPageRowsSelected(!!a),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:t})=>p(se,{checked:t.getIsSelected(),"onUpdate:checked":a=>t.toggleSelected(!!a),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1,meta:{title:"Select"}},{accessorKey:"id",header:({column:t})=>p(I,{column:t,title:"Id"}),cell:({row:t})=>p("div",{class:"w-20"},t.getValue("id")),enableSorting:!0,enableHiding:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Id"}},{accessorKey:"invoice",header:({column:t})=>p(I,{column:t,title:"Invoice"}),cell:({row:t})=>p("div",{class:"w-20"},t.getValue("invoice")),enableSorting:!0,enableHiding:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Invoice"}},{accessorKey:"company_name",header:({column:t})=>p(I,{column:t,title:"Company"}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("company_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Company"}},{accessorKey:"customer_name",header:({column:t})=>p(I,{column:t,title:"Customer"}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("customer_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Customer"}},{accessorKey:"event_display",header:({column:t})=>p(I,{column:t,title:"Event Type"}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("event_display")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Event Type"}},{accessorKey:"scheduled_date",header:({column:t})=>p(I,{column:t,title:t.columnDef.meta.title}),cell:({row:t})=>{const a=t.getValue("scheduled_date");let l="";if(a){const n=new Date(Date.parse(a));isNaN(n.getTime())?l="Not Provided":l=n.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}else l="Not provided";return p("div",{class:`w-fit ${l!="Not Provided"?"":"text-red-600 font-bold"}`},l)},enableSorting:!0,enableHiding:!0,meta:{title:"Scheduled Date"}},{accessorKey:"status",header:({column:t})=>p(I,{column:t,title:"Status"}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("status")),enableSorting:!0,enableHiding:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Status"}},{accessorKey:"additional_info",header:({column:t})=>p(I,{column:t,title:"Additional Info"}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("additional_info")),enableSorting:!0,enableHiding:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Additional Info"}},{accessorKey:"change_info",header:({column:t})=>p(I,{column:t,title:"Change Info"}),cell:({row:t})=>p("div",{class:"w-44"},t.getValue("change_info")),enableSorting:!0,enableHiding:!0,filterFn:(t,a,l)=>{var r;const n=((r=t.getValue(a))==null?void 0:r.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Change Info"}},{accessorKey:"completed_date",header:({column:t})=>p(I,{column:t,title:t.columnDef.meta.title}),cell:({row:t})=>p("div",{class:"w-fit"},t.getValue("completed_date")),enableSorting:!0,enableHiding:!0,meta:{title:"Completed Date"}},{id:"actions",cell:({row:t})=>p(aa,{row:t})}],la={class:"p-8 space-y-8 h-full"},na=c("div",{class:"flex items-center justify-between space-y-2"},[c("div",null,[c("h2",{class:"text-2xl font-bold tracking-tight"},"Session")])],-1),oa={key:0,class:"text-center"},ia={key:1},ra="/api/session",wa=V({__name:"Session",setup(t){const a=A("session"),l=n=>({id:n.id,invoice:n.invoice,company_name:n.company_name,customer_name:n.customer_name,event_display:n.event_display,scheduled_date:n.scheduled_date,completed_date:n.completed_date,status:n.status_display,additional_info:n.additional_info,change_info:n.change_info,editable:n.editable});return ue(async()=>{await a.fetch(ra,0,l)}),Xe("tableStore",a),Qe(()=>{a.$reset()}),(n,o)=>{const r=H("VIcon");return d(),u("div",la,[na,s(qt),e(a).is_loading?(d(),u("div",oa,[s(r,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-10 h-10"})])):(d(),u("div",ia,[s(zt,{data:e(a).tasks,columns:e(sa)},null,8,["data","columns"])]))])}}});export{wa as default};
