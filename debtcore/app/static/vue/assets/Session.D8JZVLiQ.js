import{_ as ge,a as he,b as we,c as ye,d as be,e as ne,u as H,f as ve,g as xe,h as $e,i as ue,j as J,k as Se,l as Ce,m as Ve,n as ke,o as De,p as Pe,q as Fe,r as Ie,F as fe,z as L,s as pe}from"./Checkbox.vue_vue_type_script_setup_true_lang.5ojqHNh9.js";import{e as h,x as R,aj as oe,o as c,l as p,k as r,a,u as e,d,c as u,v as B,F as P,am as T,g as F,O as Le,b as f,t as S,al as G,f as M,aL as Re,aM as Me,P as q,aN as Be,aO as ze,r as U,s as V,y as re,z as ie,A as ce,B as K,m as N,i as I,C as Te,D as O,$ as W,E as Y,I as Q,K as Ue,G as _e,J as Ae,H as X,Y as te,N as ae,n as j,aP as Z,Q as se,R as le,a4 as je,a5 as He,a6 as Ne,a8 as Ke,a7 as Ye,a9 as Oe,T as ee,U as Ee,W as We,X as Ge,_ as E,Z as qe,ag as Qe,ah as Xe,aQ as Je,aR as Ze,aS as et,aT as tt,aU as at,aV as st,aW as lt,aX as nt,a0 as y,a1 as ot,a2 as rt}from"../main.js";import{_ as it,a as ct}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang.DeeBgwnz.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang.CSFnz65k.js";import{_ as dt,a as ut,b as me,d as ft,c as pt,e as mt,f as _t,g as gt}from"./index.BaXUQIGZ.js";import{C as ht,a as wt,_ as yt}from"./CalendarPrevButton.vue_vue_type_script_setup_true_lang.DOcqctDd.js";import{_ as bt}from"./lodash.BtnTHUG3.js";import{_ as vt}from"./DialogFooter.vue_vue_type_script_setup_true_lang.CUbi7heN.js";import"./index.5qndC0qu.js";const xt={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},$t=h({__name:"RangeCalendar",props:{defaultPlaceholder:{},defaultValue:{},modelValue:{},placeholder:{},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},calendarLabel:{},fixedWeeks:{type:Boolean},maxValue:{},minValue:{},locale:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{type:Function},isDateUnavailable:{type:Function},dir:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(s,{emit:t}){const l=s,n=t,o=R(()=>{const{class:m,...b}=l;return b}),i=oe(o,n);return(m,b)=>(c(),p(e(Le),T({class:e(F)("p-3",l.class)},e(i)),{default:r(({grid:D,weekDays:x})=>[a(e(St),null,{default:r(()=>[a(e(kt)),a(e(Ct)),a(e(Vt))]),_:1}),d("div",xt,[(c(!0),u(P,null,B(D,g=>(c(),p(e(dt),{key:g.value.toString()},{default:r(()=>[a(e(ut),null,{default:r(()=>[a(e(me),null,{default:r(()=>[(c(!0),u(P,null,B(x,C=>(c(),p(e(ft),{key:C},{default:r(()=>[f(S(C),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),a(e(pt),null,{default:r(()=>[(c(!0),u(P,null,B(g.rows,(C,k)=>(c(),p(e(me),{key:`weekDate-${k}`,class:"mt-2 w-full"},{default:r(()=>[(c(!0),u(P,null,B(C,$=>(c(),p(e(mt),{key:$.toString(),date:$},{default:r(()=>[a(e(_t),{day:$,month:g.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}}),St=h({__name:"RangeCalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:o,...i}=t;return i}),n=G(l);return(o,i)=>(c(),p(e(Re),T({class:e(F)("relative flex w-full items-center justify-between pt-1",t.class)},e(n)),{default:r(()=>[M(o.$slots,"default")]),_:3},16,["class"]))}}),Ct=h({__name:"RangeCalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:o,...i}=t;return i}),n=G(l);return(o,i)=>(c(),p(e(Me),T({class:e(F)("text-sm font-medium",t.class)},e(n)),{default:r(({headingValue:m})=>[M(o.$slots,"default",{headingValue:m},()=>[f(S(m),1)])]),_:3},16,["class"]))}}),Vt=h({__name:"RangeCalendarNextButton",props:{step:{},asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:o,...i}=t;return i}),n=G(l);return(o,i)=>(c(),p(e(Be),T({class:e(F)(e(q)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",t.class)},e(n)),{default:r(()=>[M(o.$slots,"default",{},()=>[a(e(ht),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),kt=h({__name:"RangeCalendarPrevButton",props:{step:{},asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:o,...i}=t;return i}),n=G(l);return(o,i)=>(c(),p(e(ze),T({class:e(F)(e(q)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",t.class)},e(n)),{default:r(()=>[M(o.$slots,"default",{},()=>[a(e(wt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Dt={class:"flex flex-col md:flex-row items-center justify-between px-2 pb-10"},Pt={class:"flex-1 text-sm text-muted-foreground mb-4 md:mb-0"},Ft={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},It={class:"flex items-center space-x-2"},Lt=d("p",{class:"text-sm font-medium"},"Rows per page",-1),Rt={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Mt={class:"flex items-center space-x-2"},Bt=d("span",{class:"sr-only"},"Go to first page",-1),zt=d("span",{class:"sr-only"},"Go to previous page",-1),Tt=d("span",{class:"sr-only"},"Go to next page",-1),Ut=d("span",{class:"sr-only"},"Go to last page",-1),At=h({__name:"DataTablePagination",props:{table:{}},setup(s){return(t,l)=>{const n=U("VIcon");return c(),u("div",Dt,[d("div",Pt,S(t.table.getFilteredSelectedRowModel().rows.length)+" of "+S(t.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),d("div",Ft,[d("div",It,[Lt,a(e(ye),{"model-value":`${t.table.getState().pagination.pageSize}`,"onUpdate:modelValue":t.table.setPageSize},{default:r(()=>[a(e(ge),{class:"h-8 w-[70px]"},{default:r(()=>[a(e(he),{placeholder:`${t.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),a(e(we),{side:"top"},{default:r(()=>[(c(),u(P,null,B([10,20,30,40,50],o=>a(e(be),{key:o,value:`${o}`},{default:r(()=>[f(S(o),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),d("div",Rt," Page "+S(t.table.getState().pagination.pageIndex+1)+" of "+S(t.table.getPageCount()),1),d("div",Mt,[a(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!t.table.getCanPreviousPage(),onClick:l[0]||(l[0]=o=>t.table.setPageIndex(0))},{default:r(()=>[Bt,a(n,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),a(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!t.table.getCanPreviousPage(),onClick:l[1]||(l[1]=o=>t.table.previousPage())},{default:r(()=>[zt,a(n,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),a(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!t.table.getCanNextPage(),onClick:l[2]||(l[2]=o=>t.table.nextPage())},{default:r(()=>[Tt,a(n,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),a(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!t.table.getCanNextPage(),onClick:l[3]||(l[3]=o=>t.table.setPageIndex(t.table.getPageCount()-1))},{default:r(()=>[Ut,a(n,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),jt=h({__name:"DataTableViewOptions",props:{table:{}},setup(s){const t=s,l=R(()=>t.table.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide()));return(n,o)=>(c(),p(e(ce),null,{default:r(()=>[a(e(re),{"as-child":""},{default:r(()=>[a(e(V),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:r(()=>[f(" View ")]),_:1})]),_:1}),a(e(ie),{align:"end",class:"w-[150px]"},{default:r(()=>[a(e(it),null,{default:r(()=>[f("Toggle columns")]),_:1}),a(e(ne)),(c(!0),u(P,null,B(l.value,i=>(c(),p(e(ct),{key:i.id,class:"capitalize",checked:i.getIsVisible(),"onUpdate:checked":m=>i.toggleVisibility(!!m)},{default:r(()=>{var m;return[f(S(((m=i.columnDef.meta)==null?void 0:m.title)||i.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),Ht=h({__name:"DataTableRefreshButton",setup(s){const t=K("tableStore",H("session")),l=()=>{t.refresh(t.page_index)};return(n,o)=>{const i=U("VIcon");return c(),u("div",null,[a(e(V),{variant:"outline",size:"default",class:"flex h-8 ml-2",onClick:l},{default:r(()=>[a(i,{name:"md-refresh",class:"size-4"})]),_:1})])}}}),Nt={class:"flex items-center justify-between"},Kt={class:"flex flex-1 items-center space-x-2"},Yt=h({__name:"DataTableToolbar",props:{table:{}},setup(s){const t=s,l=R(()=>t.table.getState().columnFilters.length>0);return(n,o)=>{var i;return c(),u("div",Nt,[d("div",Kt,[a(e(de),{placeholder:"Search...","model-value":((i=n.table.getColumn("invoice"))==null?void 0:i.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:o[0]||(o[0]=m=>n.table.setGlobalFilter(m.target.value))},null,8,["model-value"]),l.value?(c(),p(e(V),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:o[1]||(o[1]=m=>n.table.resetColumnFilters())},{default:r(()=>[f(" Reset ")]),_:1})):N("",!0)]),a(jt,{table:n.table},null,8,["table"]),a(Ht)])}}}),Ot={class:"flex flex-col space-y-4 text-muted-foreground"},Et={key:0,class:"text-center"},Wt={key:1,class:"rounded-md border"},Gt=h({__name:"DataTable",props:{columns:{},data:{}},setup(s){const t=K("tableStore",H("session")),l=s,n=I([]),o=I([]),i=I({}),m=I({pageIndex:t.page_index,pageSize:t.page_size}),b=I();function D(g,C){let k;typeof g=="function"?k=g(C.value):k=g,C.value=k,t.set_page_index(k.pageIndex),t.set_page_size(k.pageSize)}const x=ve({get data(){return l.data},get columns(){return l.columns},state:{get sorting(){return n.value},get columnFilters(){return o.value},get columnVisibility(){return i.value},get rowSelection(){return b.value},get pagination(){return m.value}},enableRowSelection:!0,onSortingChange:g=>O(g,n),onPaginationChange:g=>D(g,m),onColumnFiltersChange:g=>O(g,o),onColumnVisibilityChange:g=>O(g,i),onRowSelectionChange:g=>O(g,b),getCoreRowModel:Ce(),getFilteredRowModel:Ve(),getPaginationRowModel:ke(),getSortedRowModel:De(),getFacetedRowModel:Pe(),getFacetedUniqueValues:Fe()});return Te(()=>{x.setPageIndex(t.page_index),x.setPageSize(t.page_size)}),(g,C)=>{const k=U("VIcon");return c(),u("div",Ot,[a(Yt,{table:e(x)},null,8,["table"]),e(t).is_loading?(c(),u("div",Et,[a(k,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-10 h-10"})])):(c(),u("div",Wt,[a(e(Se),{class:"text-xs"},{default:r(()=>[a(e(xe),null,{default:r(()=>[(c(!0),u(P,null,B(e(x).getHeaderGroups(),$=>(c(),p(e(J),{key:$.id},{default:r(()=>[(c(!0),u(P,null,B($.headers,_=>(c(),p(e(Ie),{key:_.id},{default:r(()=>[_.isPlaceholder?N("",!0):(c(),p(e(fe),{key:0,render:_.column.columnDef.header,props:_.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e($e),{id:"dbTableBody"},{default:r(()=>{var $;return[($=e(x).getRowModel().rows)!=null&&$.length?(c(!0),u(P,{key:0},B(e(x).getRowModel().rows,_=>(c(),p(e(J),{key:_.id,"data-state":_.getIsSelected()&&"selected"},{default:r(()=>[(c(!0),u(P,null,B(_.getVisibleCells(),v=>(c(),p(e(ue),{key:v.id},{default:r(()=>[a(e(fe),{render:v.column.columnDef.cell,props:v.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(c(),p(e(J),{key:1},{default:r(()=>[a(e(ue),{colspan:g.columns.length,class:"h-24 text-center"},{default:r(()=>[f(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})])),a(At,{table:e(x)},null,8,["table"])])}}}),qt={class:"border border-secondary rounded"},Qt={class:"bg-border/30 p-4"},Xt={class:"flex flex-col gap-4"},Jt={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},Zt=d("div",{class:"w-1/3 text-left lg:text-right my-auto"},[d("p",null,"Invoice")],-1),ea={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},ta=d("div",{class:"w-1/3 text-left lg:text-right my-auto"},[d("p",null,"Schduled Date")],-1),aa={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},sa=d("div",{class:"w-1/3 text-left lg:text-right my-auto"},[d("p",null,"Company")],-1),la={class:"flex self-end justify-end justify-self-end space-x-2"},na={class:"p-4"},oa={class:"flex justify-end space-x-2"},ra=h({__name:"DashboardCard",setup(s){const t=K("tableStore",H("session")),l=new W(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),n=I({start:new W(2024,5,20).subtract({months:3}),end:l}),o=Y({invoice:"",date:n.value,company:null}),i=Y({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),{toast:m}=Q(),b=I("");async function D($){i.is_loading=!0;try{const _=await X.get(`/api/company/list?search=${$||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});i.data=_.data.Result}catch{m({title:"Whoops, something went wrong",description:"There is an error fetching the companies.",variant:"destructive"})}finally{i.is_loading=!1}}Ue(b,bt.debounce(async $=>{await D($)},300));const x=()=>{t.set_filter(o),t.refresh(t.page_index)},g=()=>{t.set_filter({}),t.refresh(0)};_e(()=>{D()});const C=new Ae("en-US",{dateStyle:"medium"});function k($){$.id==o.company?o.company=null:o.company=$.id,i.is_open=!1}return($,_)=>{const v=U("VIcon");return c(),u("div",qt,[d("div",Qt,[d("div",Xt,[d("div",Jt,[Zt,a(e(de),{id:"invoice",modelValue:o.invoice,"onUpdate:modelValue":_[0]||(_[0]=w=>o.invoice=w),class:"w-full lg:w-1/3"},null,8,["modelValue"])]),a(e(te),{class:"my-1"}),d("div",ea,[ta,a(e(le),null,{default:r(()=>[a(e(ae),{"as-child":""},{default:r(()=>[a(e(V),{variant:"outline",class:j(e(F)("w-full lg:w-1/3 justify-start text-left font-normal",!o.date&&"text-muted-foreground"))},{default:r(()=>[a(v,{name:"bi-calendar-fill",class:"mr-2 h-4 w-4"}),o.date.start?(c(),u(P,{key:0},[o.date.end?(c(),u(P,{key:0},[f(S(e(C).format(o.date.start.toDate(e(Z)())))+" - "+S(e(C).format(o.date.end.toDate(e(Z)()))),1)],64)):(c(),u(P,{key:1},[f(S(e(C).format(o.date.start.toDate(e(Z)()))),1)],64))],64)):(c(),u(P,{key:1},[f(" Pick a date ")],64))]),_:1},8,["class"])]),_:1}),a(e(se),{class:"w-auto p-0"},{default:r(()=>[a(e($t),{modelValue:o.date,"onUpdate:modelValue":_[1]||(_[1]=w=>o.date=w),"initial-focus":"","number-of-months":2,"onUpdate:startValue":_[2]||(_[2]=w=>o.date.start=w)},null,8,["modelValue"])]),_:1})]),_:1})]),d("div",aa,[sa,a(e(le),{class:"col-span-1",open:i.is_open,"onUpdate:open":_[4]||(_[4]=w=>i.is_open=w)},{default:r(()=>[a(e(ae),{"as-child":""},{default:r(()=>[a(e(V),{variant:"outline",role:"combobox","aria-expanded":i.is_open,class:"w-full lg:w-1/3 justify-between px-3",disabled:i.is_loading},{default:r(()=>{var w;return[f(S(o.company?(w=i.data.find(A=>A.id===o.company))==null?void 0:w.label:"Select company")+" ",1),i.is_loading?(c(),p(v,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(c(),p(v,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),a(e(se),{class:"md:w-[500px] p-1"},{default:r(()=>[a(e(je),null,{default:r(()=>[a(e(He),{class:"h-9",modelValue:b.value,"onUpdate:modelValue":_[3]||(_[3]=w=>b.value=w),placeholder:"Search company..."},null,8,["modelValue"]),a(e(Ne),null,{default:r(()=>[f("No company found.")]),_:1}),a(e(Ke),null,{default:r(()=>[a(e(Ye),null,{default:r(()=>[(c(!0),u(P,null,B(i.data,w=>(c(),p(e(Oe),{key:w.id,value:w.value??"",onSelect:()=>k(w)},{default:r(()=>[f(S(w.label)+" ",1),a(v,{name:"fa-check",class:j(["ml-auto h-4 w-4",o.company===w.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),d("div",la,[a(e(V),{onClick:x,class:"w-[100px]"},{default:r(()=>[f("Filter")]),_:1})])])]),a(e(te),{class:"border-primary"}),d("div",na,[d("div",oa,[a(e(V),{onClick:g,class:"w-[100px]"},{default:r(()=>[f("All")]),_:1})])])])}}}),z=h({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(s){return(t,l)=>{const n=U("VIcon");return t.column.getCanSort()?(c(),u("div",{key:0,class:j(e(F)("flex items-center space-x-2",t.$attrs.class??""))},[a(e(ce),null,{default:r(()=>[a(e(re),{"as-child":""},{default:r(()=>[a(e(V),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:r(()=>[d("span",null,S(t.title),1),t.column.getIsSorted()==="desc"?(c(),p(n,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):t.column.getIsSorted()==="asc"?(c(),p(n,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(c(),p(n,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),a(e(ie),{align:"start"},{default:r(()=>[a(e(ee),{onClick:l[0]||(l[0]=o=>t.column.toggleSorting(!1))},{default:r(()=>[a(n,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Asc ")]),_:1}),a(e(ee),{onClick:l[1]||(l[1]=o=>t.column.toggleSorting(!0))},{default:r(()=>[a(n,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Desc ")]),_:1}),a(e(ne)),a(e(ee),{onClick:l[2]||(l[2]=o=>t.column.toggleVisibility(!1))},{default:r(()=>[a(n,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(c(),u("div",{key:1,class:j(t.$attrs.class)},S(t.title),3))}}}),ia=L.object({id:L.number(),invoice:L.string(),company_name:L.string(),customer_name:L.string().min(2).max(50),event_display:L.string(),scheduled_date:L.preprocess(s=>typeof s=="string"?new Date(s):s,L.date()),completed_date:L.string().nullable(),status:L.string(),additional_info:L.string(),change_info:L.string().nullable(),editable:L.boolean()}),ca=h({__name:"DataTableRefreshSession",props:{row:{}},setup(s){const t=K("sessionStore",H("session")),n=Y({id:s.row.id}),o=I(!1),{toast:i}=Q();async function m(){o.value=!0;try{const b=await X.patch("/api/session/refresh_session",{...n},{headers:{"Content-Type":"multipart/form-data"}});await t.refresh(t.page_index),i({title:b.data.Result,variant:"success"})}catch{i({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{o.value=!1}}return(b,D)=>{const x=U("VIcon");return c(),u("div",null,[d("div",null,[a(e(V),{variant:"ghost",size:"sm",class:"h-8 flex justify-start w-full",onClick:m},{default:r(()=>[a(x,{name:"md-refresh",class:"size-4 mr-2"}),f(" Refresh Schedule ")]),_:1})])])}}}),da={class:"grid gap-4 py-4"},ua={class:"grid grid-cols-4 items-center gap-4"},fa={class:"grid grid-cols-4 items-center gap-4"},pa={class:"col-span-3"},ma={key:0,class:"grid grid-cols-4 items-center gap-4"},_a=h({__name:"DataTableEditScheduleModal",props:{row:{}},setup(s){const t=K("sessionStore",H("session")),l=s,n=Y({id:l.row.id,invoice:l.row.invoice,scheduled_date:new W(l.row.scheduled_date.getFullYear(),l.row.scheduled_date.getMonth()+1,l.row.scheduled_date.getDate())}),o=I(!1),i=I(!1),m=I(null),{toast:b}=Q(),D=gt(new Date,1),x=new W(D.getFullYear(),D.getMonth()+1,D.getDate());function g(){const _=[{condition:n.scheduled_date==null,message:"Schedule Date cannot be blank"}];for(let v of _)if(v.condition)return m.value=v.message,!1;return!0}async function C(){if(g()){o.value=!0;try{const v=await X.patch(`/api/session/${l.row.id}/scheduled_date`,{...n},{headers:{"Content-Type":"multipart/form-data"}});k(),await t.refresh(t.page_index),b({title:v.data.Result,variant:"success"})}catch{b({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{o.value=!1}}}function k(){i.value=!i.value}function $(_){n.scheduled_date=_}return(_,v)=>{const w=U("VIcon");return c(),u("div",null,[d("div",null,[a(e(V),{variant:"ghost",size:"sm",class:"h-8 flex justify-start w-full",onClick:k},{default:r(()=>[a(w,{name:"fa-pen",class:"size-4 mr-2"}),f(" Edit Schedule ")]),_:1})]),a(e(qe),{open:i.value,"onUpdate:open":v[2]||(v[2]=A=>i.value=A)},{default:r(()=>[a(e(Ee),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:r(()=>[a(e(We),null,{default:r(()=>[a(e(Ge),null,{default:r(()=>[f("Reschedule Reminder")]),_:1})]),_:1}),d("div",da,[d("div",ua,[a(e(E),{for:"invoice",class:"text-right"},{default:r(()=>[f(" Invoice ")]),_:1}),a(e(de),{id:"invoice",modelValue:n.invoice,"onUpdate:modelValue":v[0]||(v[0]=A=>n.invoice=A),class:"col-span-3",disabled:""},null,8,["modelValue"])]),d("div",fa,[a(e(E),{for:"email",class:"text-right"},{default:r(()=>[f(" Schedule Date ")]),_:1}),d("div",pa,[a(e(le),null,{default:r(()=>[a(e(ae),{"as-child":""},{default:r(()=>[a(e(V),{variant:"outline",class:j(e(F)("w-full justify-start text-left font-normal",!n.scheduled_date&&"text-muted-foreground"))},{default:r(()=>[a(w,{name:"bi-calendar-fill",class:"mr-2 size-4"}),d("span",null,S(n.scheduled_date??"Select a date"),1)]),_:1},8,["class"])]),_:1}),a(e(se),{class:"w-auto p-0"},{default:r(()=>[a(e(yt),{mode:"date","min-value":e(x),"model-value":n.scheduled_date,"onUpdate:modelValue":v[1]||(v[1]=A=>$(A)),masks:{L:"YYYY-MM-DD"},modelConfig:{type:"string",mask:"YYYY/MM/DD"},"is-required":""},null,8,["min-value","model-value"])]),_:1})]),_:1})])])]),a(te),m.value?(c(),u("div",ma,[a(e(E),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:r(()=>[a(w,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),f(" "+S(m.value),1)]),_:1})])):N("",!0),a(e(vt),{class:"flex justify-end"},{default:r(()=>[a(e(V),{type:"submit",onClick:C,disabled:o.value},{default:r(()=>[o.value?(c(),p(w,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):N("",!0),f(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),ga=h({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(s,{emit:t}){const o=oe(s,t);return(i,m)=>(c(),p(e(Je),Qe(Xe(e(o))),{default:r(()=>[M(i.$slots,"default")]),_:3},16))}}),ha=h({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:t}){const l=s,n=t,o=R(()=>{const{class:m,...b}=l;return b}),i=oe(o,n);return(m,b)=>(c(),p(e(tt),null,{default:r(()=>[a(e(Ze),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),a(e(et),T(e(i),{class:e(F)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l.class)}),{default:r(()=>[M(m.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),wa=h({__name:"AlertDialogHeader",props:{class:{}},setup(s){const t=s;return(l,n)=>(c(),u("div",{class:j(e(F)("flex flex-col gap-y-2 text-center sm:text-left",t.class))},[M(l.$slots,"default")],2))}}),ya=h({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:n,...o}=t;return o});return(n,o)=>(c(),p(e(at),T(l.value,{class:e(F)("text-lg font-semibold",t.class)}),{default:r(()=>[M(n.$slots,"default")]),_:3},16,["class"]))}}),ba=h({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:n,...o}=t;return o});return(n,o)=>(c(),p(e(st),T(l.value,{class:e(F)("text-sm text-muted-foreground",t.class)}),{default:r(()=>[M(n.$slots,"default")]),_:3},16,["class"]))}}),va=h({__name:"AlertDialogFooter",props:{class:{}},setup(s){const t=s;return(l,n)=>(c(),u("div",{class:j(e(F)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",t.class))},[M(l.$slots,"default")],2))}}),xa=h({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:n,...o}=t;return o});return(n,o)=>(c(),p(e(lt),T(l.value,{class:e(F)(e(q)(),t.class)}),{default:r(()=>[M(n.$slots,"default")]),_:3},16,["class"]))}}),$a=h({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,l=R(()=>{const{class:n,...o}=t;return o});return(n,o)=>(c(),p(e(nt),T(l.value,{class:e(F)(e(q)({variant:"outline"}),"mt-2 sm:mt-0",t.class)}),{default:r(()=>[M(n.$slots,"default")]),_:3},16,["class"]))}}),Sa={key:0,class:"grid grid-cols-4 items-center gap-4"},Ca=h({__name:"DataTableSendMessageModal",props:{row:{}},setup(s){const t=K("sessionStore",H("session")),l=s;Y({id:l.row.id,customer_name:l.row.customer_name});const n=I(!1),o=I(!1),i=I(null),{toast:m}=Q();async function b(){n.value=!0;try{const x=await X.post(`/api/session/${l.row.id}/send_whatsapp`);D(),await t.refresh(t.page_index),m({title:"Operation in queue",description:x.data.Result,variant:"success"})}catch{m({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{n.value=!1}}function D(){o.value=!o.value}return(x,g)=>{const C=U("VIcon");return c(),u("div",null,[d("div",null,[a(e(V),{size:"sm",class:"hidden w-full h-8 lg:flex bg-green-500",onClick:D},{default:r(()=>[a(C,{name:"bi-whatsapp",class:"size-4 mr-2"}),f(" Send Whatsapp Message ")]),_:1})]),a(e(ga),{open:o.value,"onUpdate:open":g[0]||(g[0]=k=>o.value=k)},{default:r(()=>[a(e(ha),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:r(()=>[a(e(wa),null,{default:r(()=>[a(e(ya),null,{default:r(()=>[f("Are you sure?")]),_:1}),a(e(ba),null,{default:r(()=>[f(" This action will send a payment reminder to "+S(l.row.customer_name),1)]),_:1})]),_:1}),i.value?(c(),u("div",Sa,[a(e(E),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:r(()=>[a(C,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),f(" "+S(i.value),1)]),_:1})])):N("",!0),a(e(va),{class:"flex justify-end"},{default:r(()=>[a(e($a),null,{default:r(()=>[f("Cancel")]),_:1}),a(e(xa),{onClick:b,disabled:n.value},{default:r(()=>[n.value?(c(),p(C,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):N("",!0),f(" Send")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),Va={class:"w-fit mx-auto"},ka=d("span",{class:"sr-only"},"Open menu",-1),Da=h({__name:"DataTableRowActions",props:{row:{}},setup(s){const t=s,l=R(()=>ia.parse(t.row.original));return(n,o)=>{const i=U("VIcon");return c(),u("div",Va,[a(e(ce),null,{default:r(()=>[a(e(re),{"as-child":""},{default:r(()=>[a(e(V),{variant:"default",class:"flex h-8 w-8 p-0"},{default:r(()=>[a(i,{name:"bi-three-dots",class:"size-4"}),ka]),_:1})]),_:1}),a(e(ie),{align:"end",class:"w-min-fit"},{default:r(()=>[a(_a,{row:l.value},null,8,["row"]),a(ca,{row:l.value},null,8,["row"]),a(e(ne)),a(Ca,{row:l.value},null,8,["row"])]),_:1})]),_:1})])}}}),Pa=[{id:"select",header:({table:s})=>y(pe,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":t=>s.toggleAllPageRowsSelected(!!t),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:s})=>y(pe,{checked:s.getIsSelected(),"onUpdate:checked":t=>s.toggleSelected(!!t),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1,meta:{title:"Select"}},{accessorKey:"id",header:({column:s})=>y(z,{column:s,title:"Id"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("id")),enableSorting:!0,enableHiding:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Id"}},{accessorKey:"invoice",header:({column:s})=>y(z,{column:s,title:"Invoice"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("invoice")),enableSorting:!0,enableHiding:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Invoice"}},{accessorKey:"company_name",header:({column:s})=>y(z,{column:s,title:"Company"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("company_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Company"}},{accessorKey:"customer_name",header:({column:s})=>y(z,{column:s,title:"Customer"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("customer_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Customer"}},{accessorKey:"event_display",header:({column:s})=>y(z,{column:s,title:"Event Type"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("event_display")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())??"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Event Type"}},{accessorKey:"scheduled_date",header:({column:s})=>y(z,{column:s,title:s.columnDef.meta.title}),cell:({row:s})=>{const t=s.getValue("scheduled_date");let l="";if(t){const n=new Date(Date.parse(t));isNaN(n.getTime())?l="Not Provided":l=n.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}else l="Not provided";return y("div",{class:`w-fit ${l!="Not Provided"?"":"text-red-600 font-bold"}`},l)},enableSorting:!0,enableHiding:!0,meta:{title:"Scheduled Date"}},{accessorKey:"status",header:({column:s})=>y(z,{column:s,title:"Status"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("status")),enableSorting:!0,enableHiding:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Status"}},{accessorKey:"additional_info",header:({column:s})=>y(z,{column:s,title:"Additional Info"}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("additional_info")),enableSorting:!0,enableHiding:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Additional Info"}},{accessorKey:"change_info",header:({column:s})=>y(z,{column:s,title:"Change Info"}),cell:({row:s})=>y("div",{class:"w-44"},s.getValue("change_info")),enableSorting:!0,enableHiding:!0,filterFn:(s,t,l)=>{var i;const n=((i=s.getValue(t))==null?void 0:i.toString().toLowerCase())||"",o=l==null?void 0:l.toString().toLowerCase();return n.includes(o)},meta:{title:"Change Info"}},{accessorKey:"completed_date",header:({column:s})=>y(z,{column:s,title:s.columnDef.meta.title}),cell:({row:s})=>y("div",{class:"w-fit"},s.getValue("completed_date")),enableSorting:!0,enableHiding:!0,meta:{title:"Completed Date"}},{id:"actions",cell:({row:s})=>y(Da,{row:s})}],Fa={class:"p-4 md:p-8 space-y-8 h-full"},Ia=d("div",{class:"flex items-center justify-between space-y-2"},[d("div",null,[d("h2",{class:"text-2xl font-bold tracking-tight"},"Session")])],-1),La="/api/session",Na=h({__name:"Session",setup(s){const t=H("session"),l=n=>({id:n.id,invoice:n.invoice,company_name:n.company_name,customer_name:n.customer_name,event_display:n.event_display,scheduled_date:n.scheduled_date,completed_date:n.completed_date,status:n.status_display,additional_info:n.additional_info,change_info:n.change_info,editable:n.editable});return _e(async()=>{await t.fetch(La,0,l)}),rt("tableStore",t),ot(()=>{t.$reset()}),(n,o)=>(c(),u("div",Fa,[Ia,a(ra),a(Gt,{data:e(t).tasks,columns:e(Pa)},null,8,["data","columns"])]))}});export{Na as default};
