import{_ as h,a as m,b as r,c as v}from"./CardDescription.vue_vue_type_script_setup_true_lang-BXWkwlLW.js";import{_ as b}from"./CardContent.vue_vue_type_script_setup_true_lang-D46BGtUZ.js";import{e as w,o as y,c as k,f as B,n as x,u as t,g as A,i as C,r as S,d as n,a as e,k as s,b as c,t as I,E as g,s as W}from"../main.js";import{_ as N}from"./index-DhdF1qMN.js";const $=w({__name:"CardFooter",props:{class:{}},setup(d){const u=d;return(p,_)=>(y(),k("div",{class:x(t(A)("flex items-center p-6 pt-0",u.class))},[B(p.$slots,"default")],2))}}),E={class:"p-8 space-y-8"},D=n("div",{class:"flex items-center justify-between space-y-2"},[n("div",null,[n("h2",{class:"text-2xl font-bold tracking-tight"},"Connections"),n("p",{class:"text-muted-foreground"}," Here's a list of your connected apps! ")])],-1),j={class:"flex"},F={class:"flex items-stretch"},O=n("b",null,"'Connect to WhatsApp'",-1),T=n("b",null,"'Disconnect from WhatsApp'",-1),V=n("b",null,"'Authenticate'",-1),q=n("a",{href:"https://metastatus.com/whatsapp-business-api",class:"text-blue-600 underline"},"Status",-1),z=n("a",{href:"https://facebook.com/dialog/oauth?client_id=1145991156753069&display=page&redirect_uri=https://3018-27-33-84-90.ngrok-free.app/connections&response_type=token&scope=whatsapp_business_messaging,whatsapp_business_management,business_management"},null,-1),J=w({__name:"Connections",setup(d){const u=C("Unknown");window.fbAsyncInit=function(){FB.init({appId:"1145991156753069",cookie:!0,xfbml:!0,version:"v19.0"})},function(o,a,i){var l,f=o.getElementsByTagName(a)[0];o.getElementById(i)||(l=o.createElement(a),l.id=i,l.src="https://connect.facebook.net/en_US/sdk.js",f.parentNode.insertBefore(l,f))}(document,"script","facebook-jssdk");const p=()=>{if(typeof FB>"u"){console.error("Facebook SDK not yet loaded. Please wait.");return}typeof fbq=="function"&&fbq("trackCustom","WhatsAppOnboardingStart",{appId:"1145991156753069",feature:"whatsapp_embedded_signup"}),FB.login(function(o){if(console.log(o),o.authResponse){const a=o.authResponse.code;console.log("Authorization Code:",a)}else console.log("User cancelled login or did not fully authorize.")},{config_id:"3252673285040486",response_type:"code",override_default_response_type:!0,redirect_uri:"https://3018-27-33-84-90.ngrok-free.app/connections",auth_type:"rerequest"})},_=o=>{if(o.origin==="https://www.facebook.com")try{const a=JSON.parse(o.data);if(console.log(a),a.type==="WA_EMBEDDED_SIGNUP")if(a.event==="FINISH"){const{phone_number_id:i,waba_id:l}=a.data}else{const{current_step:i}=a.data}}catch{console.log("Non JSON Response",o.data)}};return window.addEventListener("message",_),(o,a)=>{const i=S("VIcon");return y(),k("div",E,[D,n("div",null,[e(t(v),{class:"shadow-none"},{default:s(()=>[n("div",j,[e(t(h),null,{default:s(()=>[e(t(m),null,{default:s(()=>[e(i,{name:"fa-whatsapp",class:"size-24 fill-green-500"})]),_:1})]),_:1}),e(t(h),{class:"flex-1"},{default:s(()=>[e(t(b),{class:"py-2 pl-0"},{default:s(()=>[n("div",F,[e(t(m),null,{default:s(()=>[c("WhatsApp Business")]),_:1}),e(t(N),{class:"ml-3",variant:"success"},{default:s(()=>[c(I(u.value),1)]),_:1})])]),_:1}),e(t(g),{class:"w-full"}),e(t(b),{class:"py-2 pl-0"},{default:s(()=>[n("div",null,[e(t(r),null,{default:s(()=>[c("To connect to WhatsApp Business, click the "),O,c(" button. You will be taken to the Meta Business website to allow DebtCore to connect to your Organisation.")]),_:1}),e(t(r),null,{default:s(()=>[c("To disconnect from WhatsApp Business, click the "),T,c(" button. This button will only be displayed when a connection has been established.")]),_:1}),e(t(r),{class:"mt-4"},{default:s(()=>[c("When the connection requires authentication, click the "),V,c(" button. You will be taken to the QBO website to re-establish connection to your Organisation.")]),_:1}),e(t(r),{class:"mt-8"},{default:s(()=>[c("Whatsapp Business API "),q,c(".")]),_:1})])]),_:1})]),_:1})]),e(t(g),{class:"w-full"}),e(t($),{class:"flex items-end justify-end mt-5"},{default:s(()=>[e(t(W),{variant:"default",onClick:p},{default:s(()=>[z,c(" Connect to WhatsApp")]),_:1})]),_:1})]),_:1})])])}}});export{J as default};
