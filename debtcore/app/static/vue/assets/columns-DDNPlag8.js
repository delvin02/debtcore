import{_ as Ve,a as Ce,b as ke,c as Se,d as Pe,e as se,u as X,f as Ue,g as Ie,h as Re,i as ee,j as J,k as Fe,l as De,m as Te,n as ze,o as Me,p as Ne,q as Ae,r as Ee,F as ae,z as A,s as te}from"./Checkbox.vue_vue_type_script_setup_true_lang-Bg2LOx-5.js";import{e as M,r as q,o as d,c as w,d as i,t as S,a as e,k as t,u as a,F as T,z,s as U,b as u,A as Y,l as g,M as le,N as ne,O as oe,P as Z,T as G,i as P,U as ie,ak as re,X as B,am as de,an as ce,ao as ue,_ as y,L as me,C as pe,K as ge,D as fe,E as _e,H as he,I as be,G as W,B as O,m as H,ap as ye,J as ve,n as K,Q as je,R as L,S as Q,g as Be,Y as k}from"../main.js";import{_ as He,a as Le}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang-CXKuI-xo.js";import{_ as we}from"./DialogScrollContent.vue_vue_type_script_setup_true_lang-IhBXtN0t.js";import{_ as xe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CUbi7heN.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-I-pZvRe2.js";import{_ as $e}from"./lodash-BtnTHUG3.js";import{_ as Ge}from"./index-DhdF1qMN.js";const We={class:"flex items-center justify-between px-2 pb-10"},Ke={class:"flex-1 text-sm text-muted-foreground"},qe={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},Je={class:"flex items-center space-x-2"},Qe=i("p",{class:"text-sm font-medium"},"Rows per page",-1),Oe={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Xe={class:"flex items-center space-x-2"},Ye=i("span",{class:"sr-only"},"Go to first page",-1),Ze=i("span",{class:"sr-only"},"Go to previous page",-1),ea=i("span",{class:"sr-only"},"Go to next page",-1),aa=i("span",{class:"sr-only"},"Go to last page",-1),ta=M({__name:"DataTablePagination",props:{table:{}},setup(r){return(o,n)=>{const s=q("VIcon");return d(),w("div",We,[i("div",Ke,S(o.table.getFilteredSelectedRowModel().rows.length)+" of "+S(o.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),i("div",qe,[i("div",Je,[Qe,e(a(Se),{"model-value":`${o.table.getState().pagination.pageSize}`,"onUpdate:modelValue":o.table.setPageSize},{default:t(()=>[e(a(Ve),{class:"h-8 w-[70px]"},{default:t(()=>[e(a(Ce),{placeholder:`${o.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),e(a(ke),{side:"top"},{default:t(()=>[(d(),w(T,null,z([10,20,30,40,50],c=>e(a(Pe),{key:c,value:`${c}`},{default:t(()=>[u(S(c),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),i("div",Oe," Page "+S(o.table.getState().pagination.pageIndex+1)+" of "+S(o.table.getPageCount()),1),i("div",Xe,[e(a(U),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!o.table.getCanPreviousPage(),onClick:n[0]||(n[0]=c=>o.table.setPageIndex(0))},{default:t(()=>[Ye,e(s,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(U),{variant:"outline",class:"h-8 w-8 p-0",disabled:!o.table.getCanPreviousPage(),onClick:n[1]||(n[1]=c=>o.table.previousPage())},{default:t(()=>[Ze,e(s,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(U),{variant:"outline",class:"h-8 w-8 p-0",disabled:!o.table.getCanNextPage(),onClick:n[2]||(n[2]=c=>o.table.nextPage())},{default:t(()=>[ea,e(s,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(U),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!o.table.getCanNextPage(),onClick:n[3]||(n[3]=c=>o.table.setPageIndex(o.table.getPageCount()-1))},{default:t(()=>[aa,e(s,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),sa=M({__name:"DataTableViewOptions",props:{table:{}},setup(r){const o=r;console.log(o.table.getAllColumns());const n=Y(()=>o.table.getAllColumns().filter(s=>typeof s.accessorFn<"u"&&s.getCanHide()));return console.log(n),(s,c)=>(d(),g(a(oe),null,{default:t(()=>[e(a(le),{"as-child":""},{default:t(()=>[e(a(U),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:t(()=>[u(" View ")]),_:1})]),_:1}),e(a(ne),{align:"end",class:"w-[150px]"},{default:t(()=>[e(a(He),null,{default:t(()=>[u("Toggle columns")]),_:1}),e(a(se)),(d(!0),w(T,null,z(n.value,f=>(d(),g(a(Le),{key:f.id,class:"capitalize",checked:f.getIsVisible(),"onUpdate:checked":h=>f.toggleVisibility(!!h)},{default:t(()=>{var h;return[u(S(((h=f.columnDef.meta)==null?void 0:h.title)||f.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),la={class:"grid gap-4 py-4"},na={class:"grid grid-cols-4 items-center gap-4"},oa=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),ia={class:"grid grid-cols-4 items-center gap-4"},ra=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),da={class:"grid grid-cols-4 items-center gap-4"},ca=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),ua={class:"grid grid-cols-4 items-center gap-4"},ma=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),pa={class:"col-span-3"},ga={class:"grid grid-cols-4 items-center gap-4"},fa={class:"grid grid-cols-4 items-center gap-4"},_a={class:"grid grid-cols-4 items-center gap-4"},ha={class:"grid grid-cols-4 items-center gap-4"},ba={class:"grid grid-cols-4 items-center gap-4"},ya={key:0,class:"grid grid-cols-4 items-center gap-4"},va=M({__name:"DataTableCreateCustomer",setup(r){const o=Z("tableStore",X("customer")),n=G({name:"",business_registration_id:"",whatsapp_phone_number:"",email:"",streetAddress:"",postcode:"",city:"",state:"",country:null}),s=G({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),c=P("");async function f(C){s.is_loading=!0;try{const m=await B.get(`http://127.0.0.1:8000/api/country/list?search=${C||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});s.data=m.data.Result}catch(m){console.error("There was an error fetching the select list:",m)}finally{s.is_loading=!1}}const h=P(!1),R=P(!1),F=P(null),{toast:V}=ie();re(c,$e.debounce(async C=>{R.value&&await f(C)},500));function b(){const C=[{condition:n.name==="",message:"Name cannot be blank"},{condition:n.whatsapp_phone_number==="",message:"Whatsapp Phone cannot be blank"},{condition:n.email==="",message:"Email cannot be blank"},{condition:n.country==null,message:"Country cannot be blank"}];for(let m of C)if(m.condition)return F.value=m.message,!1;return!0}async function N(){var l;if(!b())return;h.value=!0;const m=JSON.parse(((l=document.getElementById("drf_csrf"))==null?void 0:l.textContent)||"{}");try{const $=await B.post("http://127.0.0.1:8000/api/customer",{...n},{headers:{"Content-Type":"application/json",[m.csrfHeaderName]:m.csrfToken}});x(),await o.refresh(o.page_index),V({title:$.data.Result,variant:"success"})}catch($){var _=$.response.data.message||"";V({title:"Whoops, something went wrong",description:_,variant:"destructive"})}finally{h.value=!1}}function x(){R.value=!R.value,R.value&&f(c.value)}function I(C){n.country=C.id,s.is_open=!1}function D(C){c.value=C.target.value}return(C,m)=>{const _=q("VIcon");return d(),w("div",null,[i("div",null,[e(a(U),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:x},{default:t(()=>[e(_,{name:"fa-plus",class:"size-4"})]),_:1})]),e(a(ye),{open:R.value,"onUpdate:open":m[10]||(m[10]=l=>R.value=l)},{default:t(()=>[e(a(we),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:t(()=>[e(a(de),null,{default:t(()=>[e(a(ce),null,{default:t(()=>[u("Create Custsomer")]),_:1}),e(a(ue),null,{default:t(()=>[u(" Insert the details of the customer here. Click create when you're done. ")]),_:1})]),_:1}),i("div",la,[i("div",na,[e(a(y),{for:"name",class:"text-right"},{default:t(()=>[u(" Company Name "),oa]),_:1}),e(a(v),{id:"name",modelValue:n.name,"onUpdate:modelValue":m[0]||(m[0]=l=>n.name=l),placeholder:"Geroge Sdn Bhd",class:"col-span-3"},null,8,["modelValue"])]),i("div",ia,[e(a(y),{for:"whatsapp_phone",class:"text-right required:"},{default:t(()=>[u(" Whatsapp Phone "),ra]),_:1}),e(a(v),{id:"whatsapp_phone",modelValue:n.whatsapp_phone_number,"onUpdate:modelValue":m[1]||(m[1]=l=>n.whatsapp_phone_number=l),placeholder:"012-9886348",class:"col-span-3"},null,8,["modelValue"])]),i("div",da,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Email "),ca]),_:1}),e(a(v),{id:"email",modelValue:n.email,"onUpdate:modelValue":m[2]||(m[2]=l=>n.email=l),placeholder:"hello@example.com",class:"col-span-3"},null,8,["modelValue"])]),i("div",ua,[e(a(y),{for:"country",class:"text-right leading-normal"},{default:t(()=>[u(" Country "),ma]),_:1}),i("div",pa,[e(a(me),{open:s.is_open,"onUpdate:open":m[4]||(m[4]=l=>s.is_open=l)},{default:t(()=>[e(a(pe),{"as-child":""},{default:t(()=>[e(a(U),{variant:"outline",role:"combobox","aria-expanded":s.is_open,class:"w-full justify-between px-3",disabled:s.is_loading},{default:t(()=>{var l;return[u(S(n.country?(l=s.data.find($=>$.id===n.country))==null?void 0:l.label:"Select country")+" ",1),s.is_loading?(d(),g(_,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(d(),g(_,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),e(a(ge),{class:"w-[500px] p-1"},{default:t(()=>[e(a(fe),null,{default:t(()=>[e(a(_e),{class:"h-9",modelValue:c.value,"onUpdate:modelValue":m[3]||(m[3]=l=>c.value=l),placeholder:"Search country...",onInput:D},null,8,["modelValue"]),e(a(he),null,{default:t(()=>[u("No country found.")]),_:1}),s.is_loading?(d(),g(a(W),{key:1},{default:t(()=>[(d(),g(_,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2 my-2 mx-auto"}))]),_:1})):(d(),g(a(W),{key:0},{default:t(()=>[e(a(be),null,{default:t(()=>[(d(!0),w(T,null,z(s.data,l=>(d(),g(a(ve),{key:l.id,value:l.value??"",onSelect:()=>I(l)},{default:t(()=>[u(S(l.label)+" ",1),e(_,{name:"fa-check",class:K(["ml-auto h-4 w-4",n.country===l.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])])]),i("div",ga,[e(a(y),{for:"business_registration_id",class:"text-right"},{default:t(()=>[u(" Business ID ")]),_:1}),e(a(v),{id:"business_registration_id",modelValue:n.business_registration_id,"onUpdate:modelValue":m[5]||(m[5]=l=>n.business_registration_id=l),placeholder:"820720-X",class:"col-span-3"},null,8,["modelValue"])]),e(O),i("div",fa,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Address ")]),_:1}),e(a(v),{id:"email",modelValue:n.streetAddress,"onUpdate:modelValue":m[6]||(m[6]=l=>n.streetAddress=l),placeholder:"Lot 2000, Taman Jalan Indah",class:"col-span-3"},null,8,["modelValue"])]),i("div",_a,[e(a(y),{for:"state",class:"text-right leading-normal"},{default:t(()=>[u(" State ")]),_:1}),e(a(v),{id:"state",modelValue:n.state,"onUpdate:modelValue":m[7]||(m[7]=l=>n.state=l),placeholder:"Selangor",class:"col-span-3"},null,8,["modelValue"])]),i("div",ha,[e(a(y),{for:"city",class:"text-right leading-normal"},{default:t(()=>[u(" City ")]),_:1}),e(a(v),{id:"city",modelValue:n.city,"onUpdate:modelValue":m[8]||(m[8]=l=>n.city=l),placeholder:"Puchong",class:"col-span-3"},null,8,["modelValue"])]),i("div",ba,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Post Code ")]),_:1}),e(a(v),{id:"email",modelValue:n.postcode,"onUpdate:modelValue":m[9]||(m[9]=l=>n.postcode=l),placeholder:"22000",class:"col-span-3"},null,8,["modelValue"])]),e(O)]),F.value?(d(),w("div",ya,[e(a(y),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:t(()=>[e(_,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),u(" "+S(F.value),1)]),_:1})])):H("",!0),e(a(xe),{class:"flex justify-end"},{default:t(()=>[e(a(U),{type:"submit",onClick:N,disabled:h.value},{default:t(()=>[h.value?(d(),g(_,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):H("",!0),u(" Create")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),wa={class:"flex items-center justify-between"},xa={class:"flex flex-1 items-center space-x-2"},$a=M({__name:"DataTableToolbar",props:{table:{}},setup(r){const o=r,n=Y(()=>o.table.getState().columnFilters.length>0);return(s,c)=>{var f;return d(),w("div",wa,[i("div",xa,[e(a(v),{placeholder:"Search...","model-value":((f=s.table.getColumn("name"))==null?void 0:f.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:c[0]||(c[0]=h=>s.table.setGlobalFilter(h.target.value))},null,8,["model-value"]),n.value?(d(),g(a(U),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:c[1]||(c[1]=h=>s.table.resetColumnFilters())},{default:t(()=>[u(" Reset ")]),_:1})):H("",!0)]),e(sa,{table:s.table},null,8,["table"]),e(va)])}}}),Va={class:"space-y-4 text-muted-foreground"},Ca={class:"rounded-md border"},Za=M({__name:"DataTable",props:{columns:{},data:{}},setup(r){const o=Z("tableStore",X("customer")),n=r,s=P([]),c=P([]),f=P({}),h=P({pageIndex:o.page_index,pageSize:o.page_size}),R=P();function F(b,N){let x;typeof b=="function"?x=b(N.value):x=b,N.value=x,o.set_page_index(x.pageIndex),o.set_page_size(x.pageSize)}const V=Ue({get data(){return n.data},get columns(){return n.columns},state:{get sorting(){return s.value},get columnFilters(){return c.value},get columnVisibility(){return f.value},get rowSelection(){return R.value},get pagination(){return h.value}},enableRowSelection:!0,onSortingChange:b=>L(b,s),onPaginationChange:b=>F(b,h),onColumnFiltersChange:b=>L(b,c),onColumnVisibilityChange:b=>L(b,f),onRowSelectionChange:b=>L(b,R),getCoreRowModel:De(),getFilteredRowModel:Te(),getPaginationRowModel:ze(),getSortedRowModel:Me(),getFacetedRowModel:Ne(),getFacetedUniqueValues:Ae()});return je(()=>{V.setPageIndex(o.page_index),V.setPageSize(o.page_size)}),(b,N)=>(d(),w("div",Va,[e($a,{table:a(V)},null,8,["table"]),i("div",Ca,[e(a(Fe),null,{default:t(()=>[e(a(Ie),null,{default:t(()=>[(d(!0),w(T,null,z(a(V).getHeaderGroups(),x=>(d(),g(a(J),{key:x.id},{default:t(()=>[(d(!0),w(T,null,z(x.headers,I=>(d(),g(a(Ee),{key:I.id},{default:t(()=>[I.isPlaceholder?H("",!0):(d(),g(a(ae),{key:0,render:I.column.columnDef.header,props:I.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),e(a(Re),null,{default:t(()=>{var x;return[(x=a(V).getRowModel().rows)!=null&&x.length?(d(!0),w(T,{key:0},z(a(V).getRowModel().rows,I=>(d(),g(a(J),{key:I.id,"data-state":I.getIsSelected()&&"selected"},{default:t(()=>[(d(!0),w(T,null,z(I.getVisibleCells(),D=>(d(),g(a(ee),{key:D.id},{default:t(()=>[e(a(ae),{render:D.column.columnDef.cell,props:D.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(d(),g(a(J),{key:1},{default:t(()=>[e(a(ee),{colspan:b.columns.length,class:"h-24 text-center"},{default:t(()=>[u(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),e(ta,{table:a(V)},null,8,["table"])]))}}),j=M({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(r){return(o,n)=>{const s=q("VIcon");return o.column.getCanSort()?(d(),w("div",{key:0,class:K(a(Be)("flex items-center space-x-2",o.$attrs.class??""))},[e(a(oe),null,{default:t(()=>[e(a(le),{"as-child":""},{default:t(()=>[e(a(U),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:t(()=>[i("span",null,S(o.title),1),o.column.getIsSorted()==="desc"?(d(),g(s,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):o.column.getIsSorted()==="asc"?(d(),g(s,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(d(),g(s,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),e(a(ne),{align:"start"},{default:t(()=>[e(a(Q),{onClick:n[0]||(n[0]=c=>o.column.toggleSorting(!1))},{default:t(()=>[e(s,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Asc ")]),_:1}),e(a(Q),{onClick:n[1]||(n[1]=c=>o.column.toggleSorting(!0))},{default:t(()=>[e(s,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Desc ")]),_:1}),e(a(se)),e(a(Q),{onClick:n[2]||(n[2]=c=>o.column.toggleVisibility(!1))},{default:t(()=>[e(s,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(d(),w("div",{key:1,class:K(o.$attrs.class)},S(o.title),3))}}}),ka=A.object({id:A.number(),name:A.string().min(2).max(50),whatsapp_phone_number:A.string(),email:A.string(),country_name:A.string(),outstanding_debts:A.number()}),Sa={class:"grid gap-4 py-4"},Pa={class:"grid grid-cols-4 items-center gap-4"},Ua=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Ia={class:"grid grid-cols-4 items-center gap-4"},Ra=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Fa={class:"grid grid-cols-4 items-center gap-4"},Da=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Ta={class:"grid grid-cols-4 items-center gap-4"},za=i("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Ma={class:"col-span-3"},Na={class:"grid grid-cols-4 items-center gap-4"},Aa={class:"grid grid-cols-4 items-center gap-4"},Ea={class:"grid grid-cols-4 items-center gap-4"},ja={class:"grid grid-cols-4 items-center gap-4"},Ba={class:"grid grid-cols-4 items-center gap-4"},Ha=M({__name:"DataTableEditModal",props:{row:{}},setup(r){const o=Z("tableStore",X("customer")),n=r,s=G({name:"",business_registration_id:"",whatsapp_phone_number:"",email:"",streetAddress:"",postcode:"",city:"",state:"",country:0}),c=G({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),f=P(!0),h=P(!1),R=P(null),{toast:F}=ie(),V=P("");async function b(_,l){c.is_loading=!0;try{var $=`/api/country/list?search=${_}`;l&&($+=`&current_country=${l}`);const E=await B.get($,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});c.data=E.data.Result}catch(E){var p=E.response.data.message||"";F({title:"Whoops, something went wrong",description:p,variant:"destructive"})}finally{c.is_loading=!1}}re(V,$e.debounce(async _=>{await b(_,s.country)},300));async function N(){try{const _=await B.get(`/api/customer/${n.row.id}/`);Object.assign(s,_.data.Result),s.country&&await b("",s.country),f.value=!1}catch{f.value=!1}}function x(){const _=[{condition:s.name==="",message:"Name cannot be blank"},{condition:s.whatsapp_phone_number==="",message:"Whatsapp Phone cannot be blank"},{condition:s.email==="",message:"Email cannot be blank"},{condition:s.country==null,message:"Country cannot be blank"}];for(let l of _)if(l.condition)return R.value=l.message,!1;return!0}async function I(){if(x()){f.value=!0;try{const l=await B.patch(`/api/customer/${n.row.id}/`,{...s},{headers:{"Content-Type":"application/json"}});D(),await o.refresh(o.page_index),F({title:l.data.Result,variant:"success"})}catch{F({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{f.value=!1}}}function D(){h.value=!h.value,h.value&&N()}function C(_){s.country=_.id,c.is_open=!1}function m(_){V.value=_.target.value}return(_,l)=>{const $=q("VIcon");return d(),w("div",null,[i("div",null,[e(a(U),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:D},{default:t(()=>[e($,{name:"fa-pen",class:"size-4"})]),_:1})]),e(a(ye),{open:h.value,"onUpdate:open":l[10]||(l[10]=p=>h.value=p)},{default:t(()=>[e(a(we),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:t(()=>[e(a(de),null,{default:t(()=>[e(a(ce),null,{default:t(()=>[u("Edit Custsomer")]),_:1}),e(a(ue),null,{default:t(()=>[u(" Insert the details of the customer here. Click edit when you're done. ")]),_:1})]),_:1}),i("div",null,[i("div",Sa,[i("div",Pa,[e(a(y),{for:"name",class:"text-right"},{default:t(()=>[u(" Company Name "),Ua]),_:1}),e(a(v),{id:"name",modelValue:s.name,"onUpdate:modelValue":l[0]||(l[0]=p=>s.name=p),placeholder:"Geroge Sdn Bhd",class:"col-span-3"},null,8,["modelValue"])]),i("div",Ia,[e(a(y),{for:"whatsapp_phone",class:"text-right required:"},{default:t(()=>[u(" Whatsapp Phone "),Ra]),_:1}),e(a(v),{id:"whatsapp_phone",modelValue:s.whatsapp_phone_number,"onUpdate:modelValue":l[1]||(l[1]=p=>s.whatsapp_phone_number=p),placeholder:"012-9886348",class:"col-span-3"},null,8,["modelValue"])]),i("div",Fa,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Email "),Da]),_:1}),e(a(v),{id:"email",modelValue:s.email,"onUpdate:modelValue":l[2]||(l[2]=p=>s.email=p),placeholder:"hello@example.com",class:"col-span-3"},null,8,["modelValue"])]),i("div",Ta,[e(a(y),{for:"country",class:"text-right leading-normal"},{default:t(()=>[u(" Country "),za]),_:1}),i("div",Ma,[e(a(me),{open:c.is_open,"onUpdate:open":l[4]||(l[4]=p=>c.is_open=p)},{default:t(()=>[e(a(pe),{"as-child":""},{default:t(()=>[e(a(U),{variant:"outline",role:"combobox","aria-expanded":c.is_open,class:"w-full justify-between px-3",disabled:c.is_loading},{default:t(()=>{var p;return[u(S(s.country?(p=c.data.find(E=>E.id===s.country))==null?void 0:p.label:"Select country")+" ",1),c.is_loading?(d(),g($,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(d(),g($,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),e(a(ge),{class:"w-[500px] p-1"},{default:t(()=>[e(a(fe),null,{default:t(()=>[e(a(_e),{class:"h-9",modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=p=>V.value=p),placeholder:"Search country...",onInput:m},null,8,["modelValue"]),e(a(he),null,{default:t(()=>[u("No country found.")]),_:1}),c.is_loading?(d(),g(a(W),{key:1},{default:t(()=>[e($,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2 my-2 mx-auto"})]),_:1})):(d(),g(a(W),{key:0},{default:t(()=>[e(a(be),null,{default:t(()=>[(d(!0),w(T,null,z(c.data,p=>(d(),g(a(ve),{key:p.id,value:p.value??"",onSelect:()=>C(p)},{default:t(()=>[u(S(p.label)+" ",1),e($,{name:"fa-check",class:K(["ml-auto h-4 w-4",s.country===p.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])])]),i("div",Na,[e(a(y),{for:"business_registration_id",class:"text-right"},{default:t(()=>[u(" Business ID ")]),_:1}),e(a(v),{id:"business_registration_id",modelValue:s.business_registration_id,"onUpdate:modelValue":l[5]||(l[5]=p=>s.business_registration_id=p),placeholder:"820720-X",class:"col-span-3"},null,8,["modelValue"])]),e(O),i("div",Aa,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Address ")]),_:1}),e(a(v),{id:"email",modelValue:s.streetAddress,"onUpdate:modelValue":l[6]||(l[6]=p=>s.streetAddress=p),placeholder:"Lot 2000, Taman Jalan Indah",class:"col-span-3"},null,8,["modelValue"])]),i("div",Ea,[e(a(y),{for:"state",class:"text-right leading-normal"},{default:t(()=>[u(" State ")]),_:1}),e(a(v),{id:"state",modelValue:s.state,"onUpdate:modelValue":l[7]||(l[7]=p=>s.state=p),placeholder:"Selangor",class:"col-span-3"},null,8,["modelValue"])]),i("div",ja,[e(a(y),{for:"city",class:"text-right leading-normal"},{default:t(()=>[u(" City ")]),_:1}),e(a(v),{id:"city",modelValue:s.city,"onUpdate:modelValue":l[8]||(l[8]=p=>s.city=p),placeholder:"Puchong",class:"col-span-3"},null,8,["modelValue"])]),i("div",Ba,[e(a(y),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Post Code ")]),_:1}),e(a(v),{id:"email",modelValue:s.postcode,"onUpdate:modelValue":l[9]||(l[9]=p=>s.postcode=p),placeholder:"22000",class:"col-span-3"},null,8,["modelValue"])])])]),e(a(xe),{class:"flex justify-end"},{default:t(()=>[e(a(U),{type:"submit",onClick:I,disabled:f.value},{default:t(()=>[f.value?(d(),g($,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):H("",!0),u(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),La={class:"flex gap-1"},Ga=M({__name:"DataTableRowActions",props:{row:{}},setup(r){const o=r,n=Y(()=>ka.parse(o.row.original));return(s,c)=>(d(),w("div",La,[e(Ha,{row:n.value},null,8,["row"])]))}}),et=[{id:"select",header:({table:r})=>k(te,{checked:r.getIsAllPageRowsSelected()||r.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":o=>r.toggleAllPageRowsSelected(!!o),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:r})=>k(te,{checked:r.getIsSelected(),"onUpdate:checked":o=>r.toggleSelected(!!o),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:r})=>k(j,{column:r,title:"Name"}),cell:({row:r})=>k("div",{class:"w-fit underline"},r.getValue("name")),enableSorting:!1,enableHiding:!1,filterFn:(r,o,n)=>{var f;const s=((f=r.getValue(o))==null?void 0:f.toString().toLowerCase())??"",c=n==null?void 0:n.toString().toLowerCase();return s.includes(c)}},{accessorKey:"email",header:({column:r})=>k(j,{column:r,title:"Email"}),cell:({row:r})=>k("div",{class:"w-20"},r.getValue("email")),enableSorting:!1,enableHiding:!1,meta:{title:"Email"}},{accessorKey:"whatsapp_phone_number",header:({column:r})=>k(j,{column:r,title:"Whatsapp Phone"}),cell:({row:r})=>k("div",{class:"w-fit"},r.getValue("whatsapp_phone_number")),enableSorting:!1,enableHiding:!1,meta:{title:"Whatsapp Phone"}},{accessorKey:"country_name",header:({column:r})=>k(j,{column:r,title:"Country"}),cell:({row:r})=>k("div",{class:"w-fit"},r.getValue("country_name")),enableSorting:!1,enableHiding:!1,meta:{title:"Company Name"}},{accessorKey:"outstanding_debts",header:({column:r})=>k(j,{column:r,title:"Outstanding Debts"}),cell:({row:r})=>{const o=r.getValue("outstanding_debts");return k(Ge,{variant:o===0||o===0?"success":"destructive"},`${o} MYR`)},enableSorting:!0,enableHiding:!0,meta:{title:"Outstanding Debt"}},{id:"actions",cell:({row:r})=>k(Ga,{row:r})}];export{Za as _,et as c};
