import{_ as Le,a as Pe,b as ze,c as Re,d as je,e as pe,u as W,f as Te,g as Ae,h as Ue,i as ve,j as ie,k as Be,l as He,m as Oe,n as Ne,o as Ye,p as Ke,q as We,r as Ee,F as be,z as R,s as ye}from"./Checkbox.vue_vue_type_script_setup_true_lang.0dpU0WqK.js";import{e as x,r as H,o as d,c as u,d as c,t as y,a as t,k as o,u as e,F as I,v as T,s as V,b as f,x as N,l as m,y as _e,z as ge,A as he,B as q,m as G,i as $,C as Ge,D as Z,$ as se,E as X,I as le,K as re,G as Ie,J as qe,V as Qe,L as ee,H as ne,Y as ce,N as ue,n as j,g as F,M as Q,Q as fe,O as Xe,P as E,R as me,a4 as Je,a5 as Ze,a6 as et,a8 as tt,a7 as at,S as xe,a9 as st,T as de,U as lt,W as nt,X as ot,_ as ae,Z as it,aj as Fe,f as Y,ag as rt,ah as dt,aL as ct,aM as ut,aN as ft,am as J,aO as mt,aP as pt,aQ as _t,aR as gt,aS as ht,a0 as h,a1 as wt,a2 as vt}from"../main.js";import{_ as bt,a as yt}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang.H-PZVEjJ.js";import{_ as we}from"./Input.vue_vue_type_script_setup_true_lang.-kCyUBhQ.js";import{_ as $e,a as Se,b as te,c as Ce,d as Ve,e as ke,f as De,g as xt}from"./index.BQRzPm5F.js";import{_ as $t}from"./lodash.BtnTHUG3.js";import{_ as St}from"./DialogFooter.vue_vue_type_script_setup_true_lang.CUbi7heN.js";import{_ as Ct}from"./CalendarPrevButton.vue_vue_type_script_setup_true_lang.Dvo5YOt3.js";import"./index.5qndC0qu.js";const Vt={class:"flex flex-col md:flex-row items-center justify-between px-2 pb-10"},kt={class:"flex-1 text-sm text-muted-foreground mb-4 md:mb-0"},Dt={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},It={class:"flex items-center space-x-2"},Ft=c("p",{class:"text-sm font-medium"},"Rows per page",-1),Mt={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Lt={class:"flex items-center space-x-2"},Pt=c("span",{class:"sr-only"},"Go to first page",-1),zt=c("span",{class:"sr-only"},"Go to previous page",-1),Rt=c("span",{class:"sr-only"},"Go to next page",-1),jt=c("span",{class:"sr-only"},"Go to last page",-1),Tt=x({__name:"DataTablePagination",props:{table:{}},setup(s){return(a,n)=>{const l=H("VIcon");return d(),u("div",Vt,[c("div",kt,y(a.table.getFilteredSelectedRowModel().rows.length)+" of "+y(a.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",Dt,[c("div",It,[Ft,t(e(Re),{"model-value":`${a.table.getState().pagination.pageSize}`,"onUpdate:modelValue":a.table.setPageSize},{default:o(()=>[t(e(Le),{class:"h-8 w-[70px]"},{default:o(()=>[t(e(Pe),{placeholder:`${a.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),t(e(ze),{side:"top"},{default:o(()=>[(d(),u(I,null,T([10,20,30,40,50],i=>t(e(je),{key:i,value:`${i}`},{default:o(()=>[f(y(i),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",Mt," Page "+y(a.table.getState().pagination.pageIndex+1)+" of "+y(a.table.getPageCount()),1),c("div",Lt,[t(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanPreviousPage(),onClick:n[0]||(n[0]=i=>a.table.setPageIndex(0))},{default:o(()=>[Pt,t(l,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanPreviousPage(),onClick:n[1]||(n[1]=i=>a.table.previousPage())},{default:o(()=>[zt,t(l,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanNextPage(),onClick:n[2]||(n[2]=i=>a.table.nextPage())},{default:o(()=>[Rt,t(l,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanNextPage(),onClick:n[3]||(n[3]=i=>a.table.setPageIndex(a.table.getPageCount()-1))},{default:o(()=>[jt,t(l,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),At=x({__name:"DataTableViewOptions",props:{table:{}},setup(s){const a=s,n=N(()=>a.table.getAllColumns().filter(l=>typeof l.accessorFn<"u"&&l.getCanHide()));return(l,i)=>(d(),m(e(he),null,{default:o(()=>[t(e(_e),{"as-child":""},{default:o(()=>[t(e(V),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:o(()=>[f(" View ")]),_:1})]),_:1}),t(e(ge),{align:"end",class:"w-[150px]"},{default:o(()=>[t(e(bt),null,{default:o(()=>[f("Toggle columns")]),_:1}),t(e(pe)),(d(!0),u(I,null,T(n.value,r=>(d(),m(e(yt),{key:r.id,class:"capitalize",checked:r.getIsVisible(),"onUpdate:checked":p=>r.toggleVisibility(!!p)},{default:o(()=>{var p;return[f(y(((p=r.columnDef.meta)==null?void 0:p.title)||r.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),Ut=x({__name:"DataTableRefreshButton",setup(s){const a=q("tableStore",W("session")),n=()=>{a.refresh(a.page_index)};return(l,i)=>{const r=H("VIcon");return d(),u("div",null,[t(e(V),{variant:"outline",size:"default",class:"flex h-8 ml-2",onClick:n},{default:o(()=>[t(r,{name:"md-refresh",class:"size-4"})]),_:1})])}}}),Bt={class:"flex items-center justify-between"},Ht={class:"flex flex-1 items-center space-x-2"},Ot=x({__name:"DataTableToolbar",props:{table:{}},setup(s){const a=s,n=N(()=>a.table.getState().columnFilters.length>0);return(l,i)=>{var r;return d(),u("div",Bt,[c("div",Ht,[t(e(we),{placeholder:"Search...","model-value":((r=l.table.getColumn("invoice"))==null?void 0:r.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:i[0]||(i[0]=p=>l.table.setGlobalFilter(p.target.value))},null,8,["model-value"]),n.value?(d(),m(e(V),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:i[1]||(i[1]=p=>l.table.resetColumnFilters())},{default:o(()=>[f(" Reset ")]),_:1})):G("",!0)]),t(At,{table:l.table},null,8,["table"]),t(Ut)])}}}),Nt={class:"flex flex-col space-y-4 text-muted-foreground"},Yt={key:0,class:"text-center"},Kt={key:1,class:"rounded-md border"},Wt=x({__name:"DataTable",props:{columns:{},data:{}},setup(s){const a=q("tableStore",W("session")),n=s,l=$([]),i=$([]),r=$({}),p=$({pageIndex:a.page_index,pageSize:a.page_size}),S=$();function z(g,M){let C;typeof g=="function"?C=g(M.value):C=g,M.value=C,a.set_page_index(C.pageIndex),a.set_page_size(C.pageSize)}const k=Te({get data(){return n.data},get columns(){return n.columns},state:{get sorting(){return l.value},get columnFilters(){return i.value},get columnVisibility(){return r.value},get rowSelection(){return S.value},get pagination(){return p.value}},enableRowSelection:!0,onSortingChange:g=>Z(g,l),onPaginationChange:g=>z(g,p),onColumnFiltersChange:g=>Z(g,i),onColumnVisibilityChange:g=>Z(g,r),onRowSelectionChange:g=>Z(g,S),getCoreRowModel:He(),getFilteredRowModel:Oe(),getPaginationRowModel:Ne(),getSortedRowModel:Ye(),getFacetedRowModel:Ke(),getFacetedUniqueValues:We()});return Ge(()=>{k.setPageIndex(a.page_index),k.setPageSize(a.page_size)}),(g,M)=>{const C=H("VIcon");return d(),u("div",Nt,[t(Ot,{table:e(k)},null,8,["table"]),e(a).is_loading?(d(),u("div",Yt,[t(C,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-10 h-10"})])):(d(),u("div",Kt,[t(e(Be),{class:"text-xs"},{default:o(()=>[t(e(Ae),null,{default:o(()=>[(d(!0),u(I,null,T(e(k).getHeaderGroups(),D=>(d(),m(e(ie),{key:D.id},{default:o(()=>[(d(!0),u(I,null,T(D.headers,w=>(d(),m(e(Ee),{key:w.id},{default:o(()=>[w.isPlaceholder?G("",!0):(d(),m(e(be),{key:0,render:w.column.columnDef.header,props:w.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Ue),{id:"dbTableBody"},{default:o(()=>{var D;return[(D=e(k).getRowModel().rows)!=null&&D.length?(d(!0),u(I,{key:0},T(e(k).getRowModel().rows,w=>(d(),m(e(ie),{key:w.id,"data-state":w.getIsSelected()&&"selected"},{default:o(()=>[(d(!0),u(I,null,T(w.getVisibleCells(),v=>(d(),m(e(ve),{key:v.id},{default:o(()=>[t(e(be),{render:v.column.columnDef.cell,props:v.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(d(),m(e(ie),{key:1},{default:o(()=>[t(e(ve),{colspan:g.columns.length,class:"h-24 text-center"},{default:o(()=>[f(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})])),t(Tt,{table:e(k)},null,8,["table"])])}}}),Et={class:"border border-secondary rounded"},Gt={class:"bg-border/30 p-4"},qt={class:"flex flex-col gap-4"},Qt={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},Xt=c("div",{class:"w-1/3 text-left lg:text-right my-auto"},[c("p",null,"Invoice")],-1),Jt={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},Zt=c("div",{class:"w-1/3 text-left lg:text-right my-auto"},[c("p",null,"Schduled Date")],-1),ea={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},ta={class:"flex flex-col gap-4"},aa={class:"flex items-center justify-between"},sa={class:"flex flex-col gap-4"},la={class:"flex items-center justify-between"},na={class:"flex flex-col md:flex-row gap-x-2 md:justify-items-center md:items-center mx-auto w-full"},oa=c("div",{class:"w-1/3 text-left lg:text-right my-auto"},[c("p",null,"Company")],-1),ia={class:"flex self-end justify-end justify-self-end space-x-2"},ra={class:"p-4"},da={class:"flex justify-end space-x-2"},ca=x({__name:"DashboardCard",setup(s){const a=q("tableStore",W("session")),n=new se(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),l=$({start:new se(2024,5,20).subtract({months:3}),end:n}),i=X({invoice:"",date:l.value,company:null}),r=X({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),{toast:p}=le(),S=$("");async function z(L){r.is_loading=!0;try{const _=await ne.get(`/api/company/list?search=${L||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});r.data=_.data.Result}catch{p({title:"Whoops, something went wrong",description:"There is an error fetching the companies.",variant:"destructive"})}finally{r.is_loading=!1}}re(S,$t.debounce(async L=>{await z(L)},300));const k=()=>{a.set_filter(i),a.refresh(a.page_index)},g=()=>{a.set_filter({}),a.refresh(0)};Ie(()=>{z()}),new qe("en-US",{dateStyle:"medium"});const M=$("en-US"),C=Qe(M.value),D=$(l.value.start),w=$(l.value.end),v=$(ee({dateObj:D.value,locale:M.value,fixedWeeks:!0,weekStartsOn:0})),A=$(ee({dateObj:w.value,locale:M.value,fixedWeeks:!0,weekStartsOn:0}));function U(L,_){L==="first"?D.value=D.value.add({months:_}):w.value=w.value.add({months:_})}re(D,L=>{v.value=ee({dateObj:L,weekStartsOn:0,fixedWeeks:!1,locale:M.value}),xe(w.value,L)&&(w.value=w.value.add({months:1}))}),re(w,L=>{A.value=ee({dateObj:L,weekStartsOn:0,fixedWeeks:!1,locale:M.value}),xe(L,D.value)&&(D.value=D.value.subtract({months:1}))});function Me(L){L.id==i.company?i.company=null:i.company=L.id,r.is_open=!1}return(L,_)=>{const O=H("VIcon");return d(),u("div",Et,[c("div",Gt,[c("div",qt,[c("div",Qt,[Xt,t(e(we),{id:"invoice",modelValue:i.invoice,"onUpdate:modelValue":_[0]||(_[0]=b=>i.invoice=b),class:"w-full lg:w-1/3"},null,8,["modelValue"])]),t(e(ce),{class:"my-1"}),c("div",Jt,[Zt,t(e(me),null,{default:o(()=>[t(e(ue),{"as-child":""},{default:o(()=>[t(e(V),{variant:"outline",class:j(e(F)("w-full lg:w-1/3 justify-start px-3",!l.value&&"text-muted-foreground"))},{default:o(()=>[t(O,{name:"bi-calendar-fill",class:"mr-2 h-4 w-4"}),l.value.start?(d(),u(I,{key:0},[l.value.end?(d(),u(I,{key:0},[f(y(e(C).custom(e(Q)(l.value.start),{dateStyle:"medium"}))+" - "+y(e(C).custom(e(Q)(l.value.end),{dateStyle:"medium"})),1)],64)):(d(),u(I,{key:1},[f(y(e(C).custom(e(Q)(l.value.start),{dateStyle:"medium"})),1)],64))],64)):(d(),u(I,{key:1},[f(" Pick a date ")],64))]),_:1},8,["class"])]),_:1}),t(e(fe),{class:"w-auto p-0",align:"end"},{default:o(()=>[t(e(Xe),{modelValue:i.date,"onUpdate:modelValue":_[5]||(_[5]=b=>i.date=b),placeholder:D.value,"onUpdate:placeholder":_[6]||(_[6]=b=>D.value=b),class:"p-3"},{default:o(({weekDays:b})=>[c("div",ea,[c("div",ta,[c("div",aa,[c("button",{class:j(e(F)(e(E)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:_[1]||(_[1]=P=>U("first",-1))},[t(O,{name:"fa-chevron-left",class:"size-4"})],2),c("div",{class:j(e(F)("text-sm font-medium"))},y(e(C).fullMonthAndYear(e(Q)(v.value.value))),3),c("button",{class:j(e(F)(e(E)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:_[2]||(_[2]=P=>U("first",1))},[t(O,{name:"fa-chevron-right",class:"size-4"})],2)]),t(e($e),null,{default:o(()=>[t(e(Se),null,{default:o(()=>[t(e(te),null,{default:o(()=>[(d(!0),u(I,null,T(b,P=>(d(),m(e(Ve),{key:P,class:"w-full"},{default:o(()=>[f(y(P),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(Ce),null,{default:o(()=>[(d(!0),u(I,null,T(v.value.rows,(P,oe)=>(d(),m(e(te),{key:`weekDate-${oe}`,class:"mt-2 w-full"},{default:o(()=>[(d(!0),u(I,null,T(P,K=>(d(),m(e(ke),{key:K.toString(),date:K},{default:o(()=>[t(e(De),{day:K,month:v.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)]),c("div",sa,[c("div",la,[c("button",{class:j(e(F)(e(E)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:_[3]||(_[3]=P=>U("second",-1))},[t(O,{name:"fa-chevron-left",class:"size-4"})],2),c("div",{class:j(e(F)("text-sm font-medium"))},y(e(C).fullMonthAndYear(e(Q)(A.value.value))),3),c("button",{class:j(e(F)(e(E)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:_[4]||(_[4]=P=>U("second",1))},[t(O,{name:"fa-chevron-right",class:"size-4"})],2)]),t(e($e),null,{default:o(()=>[t(e(Se),null,{default:o(()=>[t(e(te),null,{default:o(()=>[(d(!0),u(I,null,T(b,P=>(d(),m(e(Ve),{key:P,class:"w-full"},{default:o(()=>[f(y(P),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(Ce),null,{default:o(()=>[(d(!0),u(I,null,T(A.value.rows,(P,oe)=>(d(),m(e(te),{key:`weekDate-${oe}`,class:"mt-2 w-full"},{default:o(()=>[(d(!0),u(I,null,T(P,K=>(d(),m(e(ke),{key:K.toString(),date:K},{default:o(()=>[t(e(De),{day:K,month:A.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)])])]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),c("div",na,[oa,t(e(me),{class:"col-span-1",open:r.is_open,"onUpdate:open":_[8]||(_[8]=b=>r.is_open=b)},{default:o(()=>[t(e(ue),{"as-child":""},{default:o(()=>[t(e(V),{variant:"outline",role:"combobox","aria-expanded":r.is_open,class:"w-full lg:w-1/3 justify-between px-3",disabled:r.is_loading},{default:o(()=>{var b;return[f(y(i.company?(b=r.data.find(P=>P.id===i.company))==null?void 0:b.label:"Select company")+" ",1),r.is_loading?(d(),m(O,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(d(),m(O,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),t(e(fe),{class:"md:w-[500px] p-1"},{default:o(()=>[t(e(Je),null,{default:o(()=>[t(e(Ze),{class:"h-9",modelValue:S.value,"onUpdate:modelValue":_[7]||(_[7]=b=>S.value=b),placeholder:"Search company..."},null,8,["modelValue"]),t(e(et),null,{default:o(()=>[f("No company found.")]),_:1}),t(e(tt),null,{default:o(()=>[t(e(at),null,{default:o(()=>[(d(!0),u(I,null,T(r.data,b=>(d(),m(e(st),{key:b.id,value:b.value??"",onSelect:()=>Me(b)},{default:o(()=>[f(y(b.label)+" ",1),t(O,{name:"fa-check",class:j(["ml-auto h-4 w-4",i.company===b.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),c("div",ia,[t(e(V),{onClick:k,class:"w-[100px]"},{default:o(()=>[f("Filter")]),_:1})])])]),t(e(ce),{class:"border-primary"}),c("div",ra,[c("div",da,[t(e(V),{onClick:g,class:"w-[100px]"},{default:o(()=>[f("All")]),_:1})])])])}}}),B=x({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(s){return(a,n)=>{const l=H("VIcon");return a.column.getCanSort()?(d(),u("div",{key:0,class:j(e(F)("flex items-center space-x-2",a.$attrs.class??""))},[t(e(he),null,{default:o(()=>[t(e(_e),{"as-child":""},{default:o(()=>[t(e(V),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:o(()=>[c("span",null,y(a.title),1),a.column.getIsSorted()==="desc"?(d(),m(l,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):a.column.getIsSorted()==="asc"?(d(),m(l,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(d(),m(l,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),t(e(ge),{align:"start"},{default:o(()=>[t(e(de),{onClick:n[0]||(n[0]=i=>a.column.toggleSorting(!1))},{default:o(()=>[t(l,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Asc ")]),_:1}),t(e(de),{onClick:n[1]||(n[1]=i=>a.column.toggleSorting(!0))},{default:o(()=>[t(l,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Desc ")]),_:1}),t(e(pe)),t(e(de),{onClick:n[2]||(n[2]=i=>a.column.toggleVisibility(!1))},{default:o(()=>[t(l,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),f(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(d(),u("div",{key:1,class:j(a.$attrs.class)},y(a.title),3))}}}),ua=R.object({id:R.number(),invoice:R.string(),company_name:R.string(),customer_name:R.string().min(2).max(50),event_display:R.string(),scheduled_date:R.preprocess(s=>typeof s=="string"?new Date(s):s,R.date()),completed_date:R.string().nullable(),status:R.string(),additional_info:R.string(),change_info:R.string().nullable(),editable:R.boolean()}),fa=x({__name:"DataTableRefreshSession",props:{row:{}},setup(s){const a=q("sessionStore",W("session")),l=X({id:s.row.id}),i=$(!1),{toast:r}=le();async function p(){i.value=!0;try{const S=await ne.patch("/api/session/refresh_session",{...l},{headers:{"Content-Type":"multipart/form-data"}});await a.refresh(a.page_index),r({title:S.data.Result,variant:"success"})}catch{r({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{i.value=!1}}return(S,z)=>{const k=H("VIcon");return d(),u("div",null,[c("div",null,[t(e(V),{variant:"ghost",size:"sm",class:"h-8 flex justify-start w-full",onClick:p},{default:o(()=>[t(k,{name:"md-refresh",class:"size-4 mr-2"}),f(" Refresh Schedule ")]),_:1})])])}}}),ma={class:"grid gap-4 py-4"},pa={class:"grid grid-cols-4 items-center gap-4"},_a={class:"grid grid-cols-4 items-center gap-4"},ga={class:"col-span-3"},ha={key:0,class:"grid grid-cols-4 items-center gap-4"},wa=x({__name:"DataTableEditScheduleModal",props:{row:{}},setup(s){const a=q("sessionStore",W("session")),n=s,l=X({id:n.row.id,invoice:n.row.invoice,scheduled_date:new se(n.row.scheduled_date.getFullYear(),n.row.scheduled_date.getMonth()+1,n.row.scheduled_date.getDate())}),i=$(!1),r=$(!1),p=$(null),{toast:S}=le(),z=xt(new Date,1),k=new se(z.getFullYear(),z.getMonth()+1,z.getDate());function g(){const w=[{condition:l.scheduled_date==null,message:"Schedule Date cannot be blank"}];for(let v of w)if(v.condition)return p.value=v.message,!1;return!0}async function M(){if(g()){i.value=!0;try{const v=await ne.patch(`/api/session/${n.row.id}/scheduled_date`,{...l},{headers:{"Content-Type":"multipart/form-data"}});C(),await a.refresh(a.page_index),S({title:v.data.Result,variant:"success"})}catch{S({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{i.value=!1}}}function C(){r.value=!r.value}function D(w){l.scheduled_date=w}return(w,v)=>{const A=H("VIcon");return d(),u("div",null,[c("div",null,[t(e(V),{variant:"ghost",size:"sm",class:"h-8 flex justify-start w-full",onClick:C},{default:o(()=>[t(A,{name:"fa-pen",class:"size-4 mr-2"}),f(" Edit Schedule ")]),_:1})]),t(e(it),{open:r.value,"onUpdate:open":v[2]||(v[2]=U=>r.value=U)},{default:o(()=>[t(e(lt),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:o(()=>[t(e(nt),null,{default:o(()=>[t(e(ot),null,{default:o(()=>[f("Reschedule Reminder")]),_:1})]),_:1}),c("div",ma,[c("div",pa,[t(e(ae),{for:"invoice",class:"text-right"},{default:o(()=>[f(" Invoice ")]),_:1}),t(e(we),{id:"invoice",modelValue:l.invoice,"onUpdate:modelValue":v[0]||(v[0]=U=>l.invoice=U),class:"col-span-3",disabled:""},null,8,["modelValue"])]),c("div",_a,[t(e(ae),{for:"email",class:"text-right"},{default:o(()=>[f(" Schedule Date ")]),_:1}),c("div",ga,[t(e(me),null,{default:o(()=>[t(e(ue),{"as-child":""},{default:o(()=>[t(e(V),{variant:"outline",class:j(e(F)("w-full justify-start text-left font-normal",!l.scheduled_date&&"text-muted-foreground"))},{default:o(()=>[t(A,{name:"bi-calendar-fill",class:"mr-2 size-4"}),c("span",null,y(l.scheduled_date??"Select a date"),1)]),_:1},8,["class"])]),_:1}),t(e(fe),{class:"w-auto p-0"},{default:o(()=>[t(e(Ct),{mode:"date","min-value":e(k),"model-value":l.scheduled_date,"onUpdate:modelValue":v[1]||(v[1]=U=>D(U)),masks:{L:"YYYY-MM-DD"},modelConfig:{type:"string",mask:"YYYY/MM/DD"},"is-required":""},null,8,["min-value","model-value"])]),_:1})]),_:1})])])]),t(ce),p.value?(d(),u("div",ha,[t(e(ae),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:o(()=>[t(A,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),f(" "+y(p.value),1)]),_:1})])):G("",!0),t(e(St),{class:"flex justify-end"},{default:o(()=>[t(e(V),{type:"submit",onClick:M,disabled:i.value},{default:o(()=>[i.value?(d(),m(A,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):G("",!0),f(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),va=x({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(s,{emit:a}){const i=Fe(s,a);return(r,p)=>(d(),m(e(ct),rt(dt(e(i))),{default:o(()=>[Y(r.$slots,"default")]),_:3},16))}}),ba=x({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:a}){const n=s,l=a,i=N(()=>{const{class:p,...S}=n;return S}),r=Fe(i,l);return(p,S)=>(d(),m(e(mt),null,{default:o(()=>[t(e(ut),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),t(e(ft),J(e(r),{class:e(F)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n.class)}),{default:o(()=>[Y(p.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ya=x({__name:"AlertDialogHeader",props:{class:{}},setup(s){const a=s;return(n,l)=>(d(),u("div",{class:j(e(F)("flex flex-col gap-y-2 text-center sm:text-left",a.class))},[Y(n.$slots,"default")],2))}}),xa=x({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const a=s,n=N(()=>{const{class:l,...i}=a;return i});return(l,i)=>(d(),m(e(pt),J(n.value,{class:e(F)("text-lg font-semibold",a.class)}),{default:o(()=>[Y(l.$slots,"default")]),_:3},16,["class"]))}}),$a=x({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const a=s,n=N(()=>{const{class:l,...i}=a;return i});return(l,i)=>(d(),m(e(_t),J(n.value,{class:e(F)("text-sm text-muted-foreground",a.class)}),{default:o(()=>[Y(l.$slots,"default")]),_:3},16,["class"]))}}),Sa=x({__name:"AlertDialogFooter",props:{class:{}},setup(s){const a=s;return(n,l)=>(d(),u("div",{class:j(e(F)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",a.class))},[Y(n.$slots,"default")],2))}}),Ca=x({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const a=s,n=N(()=>{const{class:l,...i}=a;return i});return(l,i)=>(d(),m(e(gt),J(n.value,{class:e(F)(e(E)(),a.class)}),{default:o(()=>[Y(l.$slots,"default")]),_:3},16,["class"]))}}),Va=x({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const a=s,n=N(()=>{const{class:l,...i}=a;return i});return(l,i)=>(d(),m(e(ht),J(n.value,{class:e(F)(e(E)({variant:"outline"}),"mt-2 sm:mt-0",a.class)}),{default:o(()=>[Y(l.$slots,"default")]),_:3},16,["class"]))}}),ka={key:0,class:"grid grid-cols-4 items-center gap-4"},Da=x({__name:"DataTableSendMessageModal",props:{row:{}},setup(s){const a=q("sessionStore",W("session")),n=s;X({id:n.row.id,customer_name:n.row.customer_name});const l=$(!1),i=$(!1),r=$(null),{toast:p}=le();async function S(){l.value=!0;try{const k=await ne.post(`/api/session/${n.row.id}/send_whatsapp`);z(),await a.refresh(a.page_index),p({title:"Operation in queue",description:k.data.Result,variant:"success"})}catch{p({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{l.value=!1}}function z(){i.value=!i.value}return(k,g)=>{const M=H("VIcon");return d(),u("div",null,[c("div",null,[t(e(V),{size:"sm",class:"hidden w-full h-8 lg:flex bg-green-500",onClick:z},{default:o(()=>[t(M,{name:"bi-whatsapp",class:"size-4 mr-2"}),f(" Send Whatsapp Message ")]),_:1})]),t(e(va),{open:i.value,"onUpdate:open":g[0]||(g[0]=C=>i.value=C)},{default:o(()=>[t(e(ba),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:o(()=>[t(e(ya),null,{default:o(()=>[t(e(xa),null,{default:o(()=>[f("Are you sure?")]),_:1}),t(e($a),null,{default:o(()=>[f(" This action will send a payment reminder to "+y(n.row.customer_name),1)]),_:1})]),_:1}),r.value?(d(),u("div",ka,[t(e(ae),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:o(()=>[t(M,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),f(" "+y(r.value),1)]),_:1})])):G("",!0),t(e(Sa),{class:"flex justify-end"},{default:o(()=>[t(e(Va),null,{default:o(()=>[f("Cancel")]),_:1}),t(e(Ca),{onClick:S,disabled:l.value},{default:o(()=>[l.value?(d(),m(M,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):G("",!0),f(" Send")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),Ia={class:"w-fit mx-auto"},Fa=c("span",{class:"sr-only"},"Open menu",-1),Ma=x({__name:"DataTableRowActions",props:{row:{}},setup(s){const a=s,n=N(()=>ua.parse(a.row.original));return(l,i)=>{const r=H("VIcon");return d(),u("div",Ia,[t(e(he),null,{default:o(()=>[t(e(_e),{"as-child":""},{default:o(()=>[t(e(V),{variant:"default",class:"flex h-8 w-8 p-0"},{default:o(()=>[t(r,{name:"bi-three-dots",class:"size-4"}),Fa]),_:1})]),_:1}),t(e(ge),{align:"end",class:"w-min-fit"},{default:o(()=>[t(wa,{row:n.value},null,8,["row"]),t(fa,{row:n.value},null,8,["row"]),t(e(pe)),t(Da,{row:n.value},null,8,["row"])]),_:1})]),_:1})])}}}),La=[{id:"select",header:({table:s})=>h(ye,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":a=>s.toggleAllPageRowsSelected(!!a),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:s})=>h(ye,{checked:s.getIsSelected(),"onUpdate:checked":a=>s.toggleSelected(!!a),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1,meta:{title:"Select"}},{accessorKey:"id",header:({column:s})=>h(B,{column:s,title:"Id"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("id")),enableSorting:!0,enableHiding:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Id"}},{accessorKey:"invoice",header:({column:s})=>h(B,{column:s,title:"Invoice"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("invoice")),enableSorting:!0,enableHiding:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Invoice"}},{accessorKey:"company_name",header:({column:s})=>h(B,{column:s,title:"Company"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("company_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Company"}},{accessorKey:"customer_name",header:({column:s})=>h(B,{column:s,title:"Customer"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("customer_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Customer"}},{accessorKey:"event_display",header:({column:s})=>h(B,{column:s,title:"Event Type"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("event_display")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Event Type"}},{accessorKey:"scheduled_date",header:({column:s})=>h(B,{column:s,title:s.columnDef.meta.title}),cell:({row:s})=>{const a=s.getValue("scheduled_date");let n="";if(a){const l=new Date(Date.parse(a));isNaN(l.getTime())?n="Not Provided":n=l.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}else n="Not provided";return h("div",{class:`w-fit ${n!="Not Provided"?"":"text-red-600 font-bold"}`},n)},enableSorting:!0,enableHiding:!0,meta:{title:"Scheduled Date"}},{accessorKey:"status",header:({column:s})=>h(B,{column:s,title:"Status"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("status")),enableSorting:!0,enableHiding:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Status"}},{accessorKey:"additional_info",header:({column:s})=>h(B,{column:s,title:"Additional Info"}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("additional_info")),enableSorting:!0,enableHiding:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Additional Info"}},{accessorKey:"change_info",header:({column:s})=>h(B,{column:s,title:"Change Info"}),cell:({row:s})=>h("div",{class:"w-44"},s.getValue("change_info")),enableSorting:!0,enableHiding:!0,filterFn:(s,a,n)=>{var r;const l=((r=s.getValue(a))==null?void 0:r.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return l.includes(i)},meta:{title:"Change Info"}},{accessorKey:"completed_date",header:({column:s})=>h(B,{column:s,title:s.columnDef.meta.title}),cell:({row:s})=>h("div",{class:"w-fit"},s.getValue("completed_date")),enableSorting:!0,enableHiding:!0,meta:{title:"Completed Date"}},{id:"actions",cell:({row:s})=>h(Ma,{row:s})}],Pa={class:"p-4 md:p-8 space-y-8 h-full"},za=c("div",{class:"flex items-center justify-between space-y-2"},[c("div",null,[c("h2",{class:"text-2xl font-bold tracking-tight"},"Session")])],-1),Ra="/api/session",Ka=x({__name:"Session",setup(s){const a=W("session"),n=l=>({id:l.id,invoice:l.invoice,company_name:l.company_name,customer_name:l.customer_name,event_display:l.event_display,scheduled_date:l.scheduled_date,completed_date:l.completed_date,status:l.status_display,additional_info:l.additional_info,change_info:l.change_info,editable:l.editable});return Ie(async()=>{await a.fetch(Ra,0,n)}),vt("tableStore",a),wt(()=>{a.$reset()}),(l,i)=>(d(),u("div",Pa,[za,t(ca),t(Wt,{data:e(a).tasks,columns:e(La)},null,8,["data","columns"])]))}});export{Ka as default};
