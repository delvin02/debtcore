import{_ as $e,a as Ce,b as ke,c as Se,d as Pe,e as Ie,f as te,g as Ue,u as Re,h as Fe,i as De,j as Z,k as O,l as Te,m as Ae,n as Ne,o as Ee,p as Me,q as je,r as ze,s as He,F as ee,z as E,t as ae}from"./Checkbox.vue_vue_type_script_setup_true_lang-CNO8bVVw.js";import{e as A,r as W,o as m,c as w,d as r,t as S,a as e,k as t,u as a,F as D,D as T,s as I,b as u,A as Q,l as h,P as se,Q as le,R as ne,ap as X,aq as G,i as P,ar as oe,a0 as ie,ax as M,as as re,at as de,au as ce,av as ue,_ as b,E as H,O as me,G as pe,N as ge,H as fe,I as _e,K as he,J as be,L as ye,m as B,aw as ve,M as we,n as K,ay as Be,a3 as L,a4 as J,g as Le,a5 as k}from"../main.js";import{u as Y,_ as xe}from"./table-B4iqM2ka.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-C1IaJMUJ.js";import{_ as Ve}from"./lodash-BtnTHUG3.js";import{_ as Ge}from"./index-DhdF1qMN.js";const Ke={class:"flex items-center justify-between px-2 pb-10"},We={class:"flex-1 text-sm text-muted-foreground"},qe={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},Oe={class:"flex items-center space-x-2"},Je=r("p",{class:"text-sm font-medium"},"Rows per page",-1),Qe={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Xe={class:"flex items-center space-x-2"},Ye=r("span",{class:"sr-only"},"Go to first page",-1),Ze=r("span",{class:"sr-only"},"Go to previous page",-1),ea=r("span",{class:"sr-only"},"Go to next page",-1),aa=r("span",{class:"sr-only"},"Go to last page",-1),ta=A({__name:"DataTablePagination",props:{table:{}},setup(d){return(o,n)=>{const l=W("VIcon");return m(),w("div",Ke,[r("div",We,S(o.table.getFilteredSelectedRowModel().rows.length)+" of "+S(o.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),r("div",qe,[r("div",Oe,[Je,e(a(Se),{"model-value":`${o.table.getState().pagination.pageSize}`,"onUpdate:modelValue":o.table.setPageSize},{default:t(()=>[e(a($e),{class:"h-8 w-[70px]"},{default:t(()=>[e(a(Ce),{placeholder:`${o.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),e(a(ke),{side:"top"},{default:t(()=>[(m(),w(D,null,T([10,20,30,40,50],c=>e(a(Pe),{key:c,value:`${c}`},{default:t(()=>[u(S(c),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),r("div",Qe," Page "+S(o.table.getState().pagination.pageIndex+1)+" of "+S(o.table.getPageCount()),1),r("div",Xe,[e(a(I),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!o.table.getCanPreviousPage(),onClick:n[0]||(n[0]=c=>o.table.setPageIndex(0))},{default:t(()=>[Ye,e(l,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(I),{variant:"outline",class:"h-8 w-8 p-0",disabled:!o.table.getCanPreviousPage(),onClick:n[1]||(n[1]=c=>o.table.previousPage())},{default:t(()=>[Ze,e(l,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(I),{variant:"outline",class:"h-8 w-8 p-0",disabled:!o.table.getCanNextPage(),onClick:n[2]||(n[2]=c=>o.table.nextPage())},{default:t(()=>[ea,e(l,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),e(a(I),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!o.table.getCanNextPage(),onClick:n[3]||(n[3]=c=>o.table.setPageIndex(o.table.getPageCount()-1))},{default:t(()=>[aa,e(l,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),sa=A({__name:"DataTableViewOptions",props:{table:{}},setup(d){const o=d;console.log(o.table.getAllColumns());const n=Q(()=>o.table.getAllColumns().filter(l=>typeof l.accessorFn<"u"&&l.getCanHide()));return console.log(n),(l,c)=>(m(),h(a(ne),null,{default:t(()=>[e(a(se),{"as-child":""},{default:t(()=>[e(a(I),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:t(()=>[u(" View ")]),_:1})]),_:1}),e(a(le),{align:"end",class:"w-[150px]"},{default:t(()=>[e(a(Ie),null,{default:t(()=>[u("Toggle columns")]),_:1}),e(a(te)),(m(!0),w(D,null,T(n.value,g=>(m(),h(a(Ue),{key:g.id,class:"capitalize",checked:g.getIsVisible(),"onUpdate:checked":y=>g.toggleVisibility(!!y)},{default:t(()=>{var y;return[u(S(((y=g.columnDef.meta)==null?void 0:y.title)||g.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),la={class:"grid gap-4 py-4"},na={class:"grid grid-cols-4 items-center gap-4"},oa=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),ia={class:"grid grid-cols-4 items-center gap-4"},ra=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),da={class:"grid grid-cols-4 items-center gap-4"},ca=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),ua={class:"grid grid-cols-4 items-center gap-4"},ma={class:"grid grid-cols-4 items-center gap-4"},pa={class:"grid grid-cols-4 items-center gap-4"},ga={class:"grid grid-cols-4 items-center gap-4"},fa={class:"grid grid-cols-4 items-center gap-4"},_a={class:"grid grid-cols-4 items-center gap-4"},ha=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),ba={class:"col-span-3"},ya={key:0,class:"grid grid-cols-4 items-center gap-4"},va=A({__name:"DataTableCreateCustomer",setup(d){const o=X("tableStore",Y("customer")),n=G({name:"",business_registration_id:"",whatsapp_phone_number:"",email:"",streetAddress:"",postcode:"",city:"",state:"",country:null}),l=G({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),c=P("");async function g($){l.is_loading=!0;try{const p=await M.get(`http://127.0.0.1:8000/api/country/list?search=${$||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});l.data=p.data.Result}catch(p){console.error("There was an error fetching the select list:",p)}finally{l.is_loading=!1}}const y=P(!1),x=P(!1),U=P(null),{toast:R}=oe();ie(c,Ve.debounce(async $=>{x.value&&await g($)},500));function _(){const $=[{condition:n.name==="",message:"Name cannot be blank"},{condition:n.whatsapp_phone_number==="",message:"Whatsapp Phone cannot be blank"},{condition:n.email==="",message:"Email cannot be blank"},{condition:n.country==null,message:"Country cannot be blank"}];for(let p of $)if(p.condition)return U.value=p.message,!1;return!0}async function N(){var f;if(!_())return;y.value=!0;const p=JSON.parse(((f=document.getElementById("drf_csrf"))==null?void 0:f.textContent)||"{}");try{const s=await M.post("http://127.0.0.1:8000/api/customer",{...n},{headers:{"Content-Type":"application/json",[p.csrfHeaderName]:p.csrfToken}});V(),await o.refresh(o.page_index),R({title:s.data.Result,variant:"success"})}catch(s){let C="An unexpected error occurred.";if(M.isAxiosError(s)&&s.response)if(s.response.data.details&&typeof s.response.data.details=="object"){const i=Object.keys(s.response.data.details);i.length>0&&s.response.data.details[i[0]].length>0&&(C=s.response.data.details[i[0]][0])}else s.response.data.error&&(C=s.response.data.error);R({title:"Whoops, something went wrong",description:C||"",variant:"destructive"})}finally{y.value=!1}}function V(){x.value=!x.value,x.value&&g(c.value)}function F($){n.country=$.id,l.is_open=!1}return($,p)=>{const f=W("VIcon");return m(),w("div",null,[r("div",null,[e(a(I),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:V},{default:t(()=>[e(f,{name:"fa-plus",class:"size-4"})]),_:1})]),e(a(ve),{open:x.value,"onUpdate:open":p[10]||(p[10]=s=>x.value=s)},{default:t(()=>[e(a(re),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:t(()=>[e(a(de),null,{default:t(()=>[e(a(ce),null,{default:t(()=>[u("Create Custsomer")]),_:1}),e(a(ue),null,{default:t(()=>[u(" Insert the details of the customer here. Click create when you're done. ")]),_:1})]),_:1}),r("div",la,[r("div",na,[e(a(b),{for:"name",class:"text-right"},{default:t(()=>[u(" Company Name "),oa]),_:1}),e(a(v),{id:"name",modelValue:n.name,"onUpdate:modelValue":p[0]||(p[0]=s=>n.name=s),placeholder:"Geroge Sdn Bhd",class:"col-span-3"},null,8,["modelValue"])]),r("div",ia,[e(a(b),{for:"whatsapp_phone",class:"text-right required:"},{default:t(()=>[u(" Whatsapp Phone "),ra]),_:1}),e(a(v),{id:"whatsapp_phone",modelValue:n.whatsapp_phone_number,"onUpdate:modelValue":p[1]||(p[1]=s=>n.whatsapp_phone_number=s),placeholder:"012-9886348",class:"col-span-3"},null,8,["modelValue"])]),r("div",da,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Email "),ca]),_:1}),e(a(v),{id:"email",modelValue:n.email,"onUpdate:modelValue":p[2]||(p[2]=s=>n.email=s),placeholder:"hello@example.com",class:"col-span-3"},null,8,["modelValue"])]),r("div",ua,[e(a(b),{for:"business_registration_id",class:"text-right"},{default:t(()=>[u(" Business ID ")]),_:1}),e(a(v),{id:"business_registration_id",modelValue:n.business_registration_id,"onUpdate:modelValue":p[3]||(p[3]=s=>n.business_registration_id=s),placeholder:"820720-X",class:"col-span-3"},null,8,["modelValue"])]),e(H),r("div",ma,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Address ")]),_:1}),e(a(v),{id:"email",modelValue:n.streetAddress,"onUpdate:modelValue":p[4]||(p[4]=s=>n.streetAddress=s),placeholder:"Lot 2000, Taman Jalan Indah",class:"col-span-3"},null,8,["modelValue"])]),r("div",pa,[e(a(b),{for:"state",class:"text-right leading-normal"},{default:t(()=>[u(" State ")]),_:1}),e(a(v),{id:"state",modelValue:n.state,"onUpdate:modelValue":p[5]||(p[5]=s=>n.state=s),placeholder:"Selangor",class:"col-span-3"},null,8,["modelValue"])]),r("div",ga,[e(a(b),{for:"city",class:"text-right leading-normal"},{default:t(()=>[u(" City ")]),_:1}),e(a(v),{id:"city",modelValue:n.city,"onUpdate:modelValue":p[6]||(p[6]=s=>n.city=s),placeholder:"Puchong",class:"col-span-3"},null,8,["modelValue"])]),r("div",fa,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Post Code ")]),_:1}),e(a(v),{id:"email",modelValue:n.postcode,"onUpdate:modelValue":p[7]||(p[7]=s=>n.postcode=s),placeholder:"22000",class:"col-span-3"},null,8,["modelValue"])]),e(H)]),r("div",_a,[e(a(b),{for:"country",class:"text-right leading-normal"},{default:t(()=>[u(" Country "),ha]),_:1}),r("div",ba,[e(a(me),{open:l.is_open,"onUpdate:open":p[9]||(p[9]=s=>l.is_open=s)},{default:t(()=>[e(a(pe),{"as-child":""},{default:t(()=>[e(a(I),{variant:"outline",role:"combobox","aria-expanded":l.is_open,class:"w-full justify-between px-3",disabled:l.is_loading},{default:t(()=>{var s;return[u(S(n.country?(s=l.data.find(C=>C.id===n.country))==null?void 0:s.label:"Select country")+" ",1),l.is_loading?(m(),h(f,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(m(),h(f,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),e(a(ge),{class:"w-[500px] p-1"},{default:t(()=>[e(a(fe),null,{default:t(()=>[e(a(_e),{class:"h-9",modelValue:c.value,"onUpdate:modelValue":p[8]||(p[8]=s=>c.value=s),placeholder:"Search country..."},null,8,["modelValue"]),e(a(he),null,{default:t(()=>[u("No country found.")]),_:1}),e(a(be),null,{default:t(()=>[e(a(ye),null,{default:t(()=>[(m(!0),w(D,null,T(l.data,s=>(m(),h(a(we),{key:s.id,value:s.value??"",onSelect:()=>F(s)},{default:t(()=>[u(S(s.label)+" ",1),e(f,{name:"fa-check",class:K(["ml-auto h-4 w-4",n.country===s.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),e(H),U.value?(m(),w("div",ya,[e(a(b),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:t(()=>[e(f,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),u(" "+S(U.value),1)]),_:1})])):B("",!0),e(a(xe),{class:"flex justify-end"},{default:t(()=>[e(a(I),{type:"submit",onClick:N,disabled:y.value},{default:t(()=>[y.value?(m(),h(f,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):B("",!0),u(" Create")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),wa={class:"flex items-center justify-between"},xa={class:"flex flex-1 items-center space-x-2"},Va=A({__name:"DataTableToolbar",props:{table:{}},setup(d){const o=d,n=Q(()=>o.table.getState().columnFilters.length>0);return(l,c)=>{var g;return m(),w("div",wa,[r("div",xa,[e(a(v),{placeholder:"Search...","model-value":((g=l.table.getColumn("name"))==null?void 0:g.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:c[0]||(c[0]=y=>l.table.setGlobalFilter(y.target.value))},null,8,["model-value"]),n.value?(m(),h(a(I),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:c[1]||(c[1]=y=>l.table.resetColumnFilters())},{default:t(()=>[u(" Reset ")]),_:1})):B("",!0)]),e(sa,{table:l.table},null,8,["table"]),e(va)])}}}),$a={class:"space-y-4 text-muted-foreground"},Ca={class:"rounded-md border"},Qa=A({__name:"DataTable",props:{columns:{},data:{}},setup(d){const o=X("tableStore",Y("customer")),n=d,l=P([]),c=P([]),g=P({}),y=P({pageIndex:o.page_index,pageSize:o.page_size}),x=P();function U(_,N){let V;typeof _=="function"?V=_(N.value):V=_,N.value=V,o.set_page_index(V.pageIndex),o.set_page_size(V.pageSize)}const R=Re({get data(){return n.data},get columns(){return n.columns},state:{get sorting(){return l.value},get columnFilters(){return c.value},get columnVisibility(){return g.value},get rowSelection(){return x.value},get pagination(){return y.value}},enableRowSelection:!0,onSortingChange:_=>L(_,l),onPaginationChange:_=>U(_,y),onColumnFiltersChange:_=>L(_,c),onColumnVisibilityChange:_=>L(_,g),onRowSelectionChange:_=>L(_,x),getCoreRowModel:Ae(),getFilteredRowModel:Ne(),getPaginationRowModel:Ee(),getSortedRowModel:Me(),getFacetedRowModel:je(),getFacetedUniqueValues:ze()});return Be(()=>{R.setPageIndex(o.page_index),R.setPageSize(o.page_size)}),(_,N)=>(m(),w("div",$a,[e(Va,{table:a(R)},null,8,["table"]),r("div",Ca,[e(a(Te),null,{default:t(()=>[e(a(Fe),null,{default:t(()=>[(m(!0),w(D,null,T(a(R).getHeaderGroups(),V=>(m(),h(a(O),{key:V.id},{default:t(()=>[(m(!0),w(D,null,T(V.headers,F=>(m(),h(a(He),{key:F.id},{default:t(()=>[F.isPlaceholder?B("",!0):(m(),h(a(ee),{key:0,render:F.column.columnDef.header,props:F.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),e(a(De),null,{default:t(()=>{var V;return[(V=a(R).getRowModel().rows)!=null&&V.length?(m(!0),w(D,{key:0},T(a(R).getRowModel().rows,F=>(m(),h(a(O),{key:F.id,"data-state":F.getIsSelected()&&"selected"},{default:t(()=>[(m(!0),w(D,null,T(F.getVisibleCells(),$=>(m(),h(a(Z),{key:$.id},{default:t(()=>[e(a(ee),{render:$.column.columnDef.cell,props:$.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(m(),h(a(O),{key:1},{default:t(()=>[e(a(Z),{colspan:_.columns.length,class:"h-24 text-center"},{default:t(()=>[u(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),e(ta,{table:a(R)},null,8,["table"])]))}}),z=A({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(d){return(o,n)=>{const l=W("VIcon");return o.column.getCanSort()?(m(),w("div",{key:0,class:K(a(Le)("flex items-center space-x-2",o.$attrs.class??""))},[e(a(ne),null,{default:t(()=>[e(a(se),{"as-child":""},{default:t(()=>[e(a(I),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:t(()=>[r("span",null,S(o.title),1),o.column.getIsSorted()==="desc"?(m(),h(l,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):o.column.getIsSorted()==="asc"?(m(),h(l,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(m(),h(l,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),e(a(le),{align:"start"},{default:t(()=>[e(a(J),{onClick:n[0]||(n[0]=c=>o.column.toggleSorting(!1))},{default:t(()=>[e(l,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Asc ")]),_:1}),e(a(J),{onClick:n[1]||(n[1]=c=>o.column.toggleSorting(!0))},{default:t(()=>[e(l,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Desc ")]),_:1}),e(a(te)),e(a(J),{onClick:n[2]||(n[2]=c=>o.column.toggleVisibility(!1))},{default:t(()=>[e(l,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),u(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(m(),w("div",{key:1,class:K(o.$attrs.class)},S(o.title),3))}}}),ka=E.object({id:E.number(),name:E.string().min(2).max(50),whatsapp_phone_number:E.string(),email:E.string(),country_name:E.string(),outstanding_debts:E.number()}),Sa={class:"grid gap-4 py-4"},Pa={class:"grid grid-cols-4 items-center gap-4"},Ia=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Ua={class:"grid grid-cols-4 items-center gap-4"},Ra=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Fa={class:"grid grid-cols-4 items-center gap-4"},Da=r("span",{class:"absolute translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 text-red-500 rounded-full"},"*",-1),Ta={class:"grid grid-cols-4 items-center gap-4"},Aa={class:"grid grid-cols-4 items-center gap-4"},Na={class:"grid grid-cols-4 items-center gap-4"},Ea={class:"grid grid-cols-4 items-center gap-4"},Ma={class:"grid grid-cols-4 items-center gap-4"},ja={class:"grid grid-cols-4 items-center gap-4"},za={class:"col-span-3"},Ha=A({__name:"DataTableEditModal",props:{row:{}},setup(d){const o=X("tableStore",Y("customer")),n=d,l=G({name:"",business_registration_id:"",whatsapp_phone_number:"",email:"",streetAddress:"",postcode:"",city:"",state:"",country:null}),c=G({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),g=P("");async function y(f){c.is_loading=!0;try{const s=await M.get(`http://127.0.0.1:8000/api/country/list?search=${f||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});c.data=s.data.Result,console.log(c.data)}catch(s){console.error("There was an error fetching the select list:",s)}finally{c.is_loading=!1}}const x=P(!0),U=P(!1),R=P(null),{toast:_}=oe();ie(g,Ve.debounce(async f=>{U.value&&await y(f)},500));async function N(){try{const f=await M.get(`http://127.0.0.1:8000/api/customer/${n.row.id}/`);Object.assign(l,f.data.Result),x.value=!1}catch{x.value=!1}}function V(){const f=[{condition:l.name==="",message:"Name cannot be blank"},{condition:l.whatsapp_phone_number==="",message:"Whatsapp Phone cannot be blank"},{condition:l.email==="",message:"Email cannot be blank"},{condition:l.country==null,message:"Country cannot be blank"}];for(let s of f)if(s.condition)return R.value=s.message,!1;return!0}async function F(){var C;if(!V())return;x.value=!0;const s=JSON.parse(((C=document.getElementById("drf_csrf"))==null?void 0:C.textContent)||"{}");try{const i=await M.patch(`http://127.0.0.1:8000/api/customer/${n.row.id}/`,{...l},{headers:{"Content-Type":"application/json",[s.csrfHeaderName]:s.csrfToken}});$(),await o.refresh(o.page_index),_({title:i.data.Result,variant:"success"})}catch(i){let j="An unexpected error occurred.";if(M.isAxiosError(i)&&i.response)if(i.response.data.details&&typeof i.response.data.details=="object"){const q=Object.keys(i.response.data.details);q.length>0&&i.response.data.details[q[0]].length>0&&(j=i.response.data.details[q[0]][0])}else i.response.data.error&&(j=i.response.data.error);_({title:"Whoops, something went wrong",description:j||"",variant:"destructive"})}finally{x.value=!1}}function $(){U.value=!U.value,U.value&&(N(),y(g.value))}function p(f){l.country=f.id,c.is_open=!1}return(f,s)=>{const C=W("VIcon");return m(),w("div",null,[r("div",null,[e(a(I),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:$},{default:t(()=>[e(C,{name:"fa-pen",class:"size-4"})]),_:1})]),e(a(ve),{open:U.value,"onUpdate:open":s[10]||(s[10]=i=>U.value=i)},{default:t(()=>[e(a(re),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:t(()=>[e(a(de),null,{default:t(()=>[e(a(ce),null,{default:t(()=>[u("Edit Custsomer")]),_:1}),e(a(ue),null,{default:t(()=>[u(" Insert the details of the customer here. Click edit when you're done. ")]),_:1})]),_:1}),r("div",Sa,[r("div",Pa,[e(a(b),{for:"name",class:"text-right"},{default:t(()=>[u(" Company Name "),Ia]),_:1}),e(a(v),{id:"name",modelValue:l.name,"onUpdate:modelValue":s[0]||(s[0]=i=>l.name=i),placeholder:"Geroge Sdn Bhd",class:"col-span-3"},null,8,["modelValue"])]),r("div",Ua,[e(a(b),{for:"whatsapp_phone",class:"text-right required:"},{default:t(()=>[u(" Whatsapp Phone "),Ra]),_:1}),e(a(v),{id:"whatsapp_phone",modelValue:l.whatsapp_phone_number,"onUpdate:modelValue":s[1]||(s[1]=i=>l.whatsapp_phone_number=i),placeholder:"012-9886348",class:"col-span-3"},null,8,["modelValue"])]),r("div",Fa,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Email "),Da]),_:1}),e(a(v),{id:"email",modelValue:l.email,"onUpdate:modelValue":s[2]||(s[2]=i=>l.email=i),placeholder:"hello@example.com",class:"col-span-3"},null,8,["modelValue"])]),r("div",Ta,[e(a(b),{for:"business_registration_id",class:"text-right"},{default:t(()=>[u(" Business ID ")]),_:1}),e(a(v),{id:"business_registration_id",modelValue:l.business_registration_id,"onUpdate:modelValue":s[3]||(s[3]=i=>l.business_registration_id=i),placeholder:"820720-X",class:"col-span-3"},null,8,["modelValue"])]),e(H),r("div",Aa,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Address ")]),_:1}),e(a(v),{id:"email",modelValue:l.streetAddress,"onUpdate:modelValue":s[4]||(s[4]=i=>l.streetAddress=i),placeholder:"Lot 2000, Taman Jalan Indah",class:"col-span-3"},null,8,["modelValue"])]),r("div",Na,[e(a(b),{for:"state",class:"text-right leading-normal"},{default:t(()=>[u(" State ")]),_:1}),e(a(v),{id:"state",modelValue:l.state,"onUpdate:modelValue":s[5]||(s[5]=i=>l.state=i),placeholder:"Selangor",class:"col-span-3"},null,8,["modelValue"])]),r("div",Ea,[e(a(b),{for:"city",class:"text-right leading-normal"},{default:t(()=>[u(" City ")]),_:1}),e(a(v),{id:"city",modelValue:l.city,"onUpdate:modelValue":s[6]||(s[6]=i=>l.city=i),placeholder:"Puchong",class:"col-span-3"},null,8,["modelValue"])]),r("div",Ma,[e(a(b),{for:"email",class:"text-right leading-normal"},{default:t(()=>[u(" Post Code ")]),_:1}),e(a(v),{id:"email",modelValue:l.postcode,"onUpdate:modelValue":s[7]||(s[7]=i=>l.postcode=i),placeholder:"22000",class:"col-span-3"},null,8,["modelValue"])]),e(H)]),r("div",ja,[e(a(b),{for:"country",class:"text-right leading-normal"},{default:t(()=>[u(" Country ")]),_:1}),r("div",za,[e(a(me),{open:c.is_open,"onUpdate:open":s[9]||(s[9]=i=>c.is_open=i)},{default:t(()=>[e(a(pe),{"as-child":""},{default:t(()=>[e(a(I),{variant:"outline",role:"combobox","aria-expanded":c.is_open,class:"w-full justify-between px-3",disabled:c.is_loading},{default:t(()=>{var i;return[u(S(l.country?(i=c.data.find(j=>j.id===l.country))==null?void 0:i.label:"Select country")+" ",1),c.is_loading?(m(),h(C,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(m(),h(C,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),e(a(ge),{class:"w-[500px] p-1"},{default:t(()=>[e(a(fe),null,{default:t(()=>[e(a(_e),{class:"h-9",modelValue:g.value,"onUpdate:modelValue":s[8]||(s[8]=i=>g.value=i),placeholder:"Search country..."},null,8,["modelValue"]),e(a(he),null,{default:t(()=>[u("No country found.")]),_:1}),e(a(be),null,{default:t(()=>[e(a(ye),null,{default:t(()=>[(m(!0),w(D,null,T(c.data,i=>(m(),h(a(we),{key:i.id,value:i.value??"",onSelect:()=>p(i)},{default:t(()=>[u(S(i.label)+" ",1),e(C,{name:"fa-check",class:K(["ml-auto h-4 w-4",l.country===i.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),e(a(xe),{class:"flex justify-end"},{default:t(()=>[e(a(I),{type:"submit",onClick:F,disabled:x.value},{default:t(()=>[x.value?(m(),h(C,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):B("",!0),u(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),Ba={class:"flex gap-1"},La=A({__name:"DataTableRowActions",props:{row:{}},setup(d){const o=d,n=Q(()=>ka.parse(o.row.original));return(l,c)=>(m(),w("div",Ba,[e(Ha,{row:n.value},null,8,["row"])]))}}),Xa=[{id:"select",header:({table:d})=>k(ae,{checked:d.getIsAllPageRowsSelected()||d.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":o=>d.toggleAllPageRowsSelected(!!o),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:d})=>k(ae,{checked:d.getIsSelected(),"onUpdate:checked":o=>d.toggleSelected(!!o),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:d})=>k(z,{column:d,title:"Name"}),cell:({row:d})=>k("div",{class:"w-fit underline"},d.getValue("name")),enableSorting:!1,enableHiding:!1,filterFn:(d,o,n)=>{var g;const l=((g=d.getValue(o))==null?void 0:g.toString().toLowerCase())??"",c=n==null?void 0:n.toString().toLowerCase();return l.includes(c)}},{accessorKey:"email",header:({column:d})=>k(z,{column:d,title:"Email"}),cell:({row:d})=>k("div",{class:"w-20"},d.getValue("email")),enableSorting:!1,enableHiding:!1,meta:{title:"Email"}},{accessorKey:"whatsapp_phone_number",header:({column:d})=>k(z,{column:d,title:"Whatsapp Phone"}),cell:({row:d})=>k("div",{class:"w-fit"},d.getValue("whatsapp_phone_number")),enableSorting:!1,enableHiding:!1,meta:{title:"Whatsapp Phone"}},{accessorKey:"country_name",header:({column:d})=>k(z,{column:d,title:"Country"}),cell:({row:d})=>k("div",{class:"w-fit"},d.getValue("country_name")),enableSorting:!1,enableHiding:!1,meta:{title:"Company Name"}},{accessorKey:"outstanding_debts",header:({column:d})=>k(z,{column:d,title:"Outstanding Debts"}),cell:({row:d})=>{const o=d.getValue("outstanding_debts");return k(Ge,{variant:o===0||o===0?"success":"destructive"},`${o} MYR`)},enableSorting:!0,enableHiding:!0,meta:{title:"Outstanding Debt"}},{id:"actions",cell:({row:d})=>k(La,{row:d})}];export{Qa as _,Xa as c};
