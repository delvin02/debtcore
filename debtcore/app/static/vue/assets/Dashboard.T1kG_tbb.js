import{_ as De,a as Me,b as Fe,c as Ie,d as Re,e as he,u as J,f as Le,g as Pe,h as ze,i as ie,j as X,k as Te,l as Ue,m as je,n as Ae,o as He,p as Ne,q as Oe,r as Ye,F as re,z as F,s as de}from"./Checkbox.vue_vue_type_script_setup_true_lang.5ojqHNh9.js";import{e as z,r as N,o as i,c as u,d as c,t as p,a as t,k as a,u as e,F as y,v as D,s as I,b as m,x as le,l as v,y as we,z as be,A as ye,m as H,B as ne,i as S,C as Be,D as O,E as oe,G as $e,H as ae,$ as se,I as xe,J as Ke,K as Z,V as Ee,L as Y,n as P,g as T,M as A,N as Se,O as Ge,P as B,Q as Ce,R as ke,S as ce,T as ee,U as We,W as qe,X as Je,_ as te,Y as Qe,Z as Xe,a0 as b,a1 as Ze,a2 as et}from"../main.js";import{_ as tt,a as at}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang.DeeBgwnz.js";import{_ as Ve}from"./Input.vue_vue_type_script_setup_true_lang.CSFnz65k.js";import"./lodash.BtnTHUG3.js";import{_ as K,a as E,b as G}from"./CardDescription.vue_vue_type_script_setup_true_lang.nuAmEoIx.js";import{_ as W}from"./CardTitle.vue_vue_type_script_setup_true_lang.CooFW0om.js";import{_ as ue,a as fe,b as q,c as me,d as _e,e as ge,f as pe,g as st}from"./RangeCalendarHeadCell.vue_vue_type_script_setup_true_lang.wPydTvov.js";import{_ as lt}from"./DialogFooter.vue_vue_type_script_setup_true_lang.CUbi7heN.js";import{_ as nt}from"./CalendarPrevButton.vue_vue_type_script_setup_true_lang.DOcqctDd.js";import{f as ve}from"./index.BccI3ZLR.js";import{p as ot}from"./index.DeXtphQp.js";import"./index.5qndC0qu.js";const it={class:"flex flex-col md:flex-row items-center justify-between px-2 pb-10"},rt={class:"flex-1 text-sm text-muted-foreground mb-4 md:mb-0"},dt={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},ct={class:"flex items-center space-x-2"},ut=c("p",{class:"text-sm font-medium"},"Rows per page",-1),ft={class:"flex w-[100px] items-center justify-center text-sm font-medium"},mt={class:"flex items-center space-x-2"},_t=c("span",{class:"sr-only"},"Go to first page",-1),gt=c("span",{class:"sr-only"},"Go to previous page",-1),pt=c("span",{class:"sr-only"},"Go to next page",-1),vt=c("span",{class:"sr-only"},"Go to last page",-1),ht=z({__name:"DataTablePagination",props:{table:{}},setup(n){return(s,o)=>{const l=N("VIcon");return i(),u("div",it,[c("div",rt,p(s.table.getFilteredSelectedRowModel().rows.length)+" of "+p(s.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",dt,[c("div",ct,[ut,t(e(Ie),{"model-value":`${s.table.getState().pagination.pageSize}`,"onUpdate:modelValue":s.table.setPageSize},{default:a(()=>[t(e(De),{class:"h-8 w-[70px]"},{default:a(()=>[t(e(Me),{placeholder:`${s.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),t(e(Fe),{side:"top"},{default:a(()=>[(i(),u(y,null,D([10,20,30,40,50],r=>t(e(Re),{key:r,value:`${r}`},{default:a(()=>[m(p(r),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",ft," Page "+p(s.table.getState().pagination.pageIndex+1)+" of "+p(s.table.getPageCount()),1),c("div",mt,[t(e(I),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!s.table.getCanPreviousPage(),onClick:o[0]||(o[0]=r=>s.table.setPageIndex(0))},{default:a(()=>[_t,t(l,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(I),{variant:"outline",class:"h-8 w-8 p-0",disabled:!s.table.getCanPreviousPage(),onClick:o[1]||(o[1]=r=>s.table.previousPage())},{default:a(()=>[gt,t(l,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(I),{variant:"outline",class:"h-8 w-8 p-0",disabled:!s.table.getCanNextPage(),onClick:o[2]||(o[2]=r=>s.table.nextPage())},{default:a(()=>[pt,t(l,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(I),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!s.table.getCanNextPage(),onClick:o[3]||(o[3]=r=>s.table.setPageIndex(s.table.getPageCount()-1))},{default:a(()=>[vt,t(l,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),wt=z({__name:"DataTableViewOptions",props:{table:{}},setup(n){const s=n,o=le(()=>s.table.getAllColumns().filter(l=>typeof l.accessorFn<"u"&&l.getCanHide()));return(l,r)=>(i(),v(e(ye),null,{default:a(()=>[t(e(we),{"as-child":""},{default:a(()=>[t(e(I),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:a(()=>[m(" View ")]),_:1})]),_:1}),t(e(be),{align:"end",class:"w-[150px]"},{default:a(()=>[t(e(tt),null,{default:a(()=>[m("Toggle columns")]),_:1}),t(e(he)),(i(!0),u(y,null,D(o.value,d=>(i(),v(e(at),{key:d.id,class:"capitalize",checked:d.getIsVisible(),"onUpdate:checked":$=>d.toggleVisibility(!!$)},{default:a(()=>{var $;return[m(p((($=d.columnDef.meta)==null?void 0:$.title)||d.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),bt={class:"flex items-center justify-between"},yt={class:"flex flex-1 items-center space-x-2"},$t=z({__name:"DataTableToolbar",props:{table:{}},setup(n){const s=n,o=le(()=>s.table.getState().columnFilters.length>0);return(l,r)=>{var d;return i(),u("div",bt,[c("div",yt,[t(e(Ve),{placeholder:"Search invoice...","model-value":((d=l.table.getColumn("invoice"))==null?void 0:d.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:r[0]||(r[0]=$=>l.table.setGlobalFilter($.target.value))},null,8,["model-value"]),o.value?(i(),v(e(I),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:r[1]||(r[1]=$=>l.table.resetColumnFilters())},{default:a(()=>[m(" Reset ")]),_:1})):H("",!0)]),t(wt,{table:l.table},null,8,["table"])])}}}),xt={class:"space-y-4 text-muted-foreground"},St={class:"rounded-md border"},Ct=z({__name:"DataTable",props:{columns:{},data:{}},setup(n){const s=ne("tableStore",J("transaction")),o=n,l=S([]),r=S([]),d=S({}),$=S({pageIndex:s.page_index,pageSize:s.page_size}),k=S();function M(_,R){let w;typeof _=="function"?w=_(R.value):w=_,R.value=w,s.set_page_index(w.pageIndex),s.set_page_size(w.pageSize)}const h=Le({get data(){return o.data},get columns(){return o.columns},state:{get sorting(){return l.value},get columnFilters(){return r.value},get columnVisibility(){return d.value},get rowSelection(){return k.value},get pagination(){return $.value}},enableRowSelection:!0,onSortingChange:_=>O(_,l),onPaginationChange:_=>M(_,$),onColumnFiltersChange:_=>O(_,r),onColumnVisibilityChange:_=>O(_,d),onRowSelectionChange:_=>O(_,k),getCoreRowModel:Ue(),getFilteredRowModel:je(),getPaginationRowModel:Ae(),getSortedRowModel:He(),getFacetedRowModel:Ne(),getFacetedUniqueValues:Oe()});return Be(()=>{h.setPageIndex(s.page_index),h.setPageSize(s.page_size)}),(_,R)=>(i(),u("div",xt,[t($t,{table:e(h)},null,8,["table"]),c("div",St,[t(e(Te),{class:"text-xs"},{default:a(()=>[t(e(Pe),null,{default:a(()=>[(i(!0),u(y,null,D(e(h).getHeaderGroups(),w=>(i(),v(e(X),{key:w.id},{default:a(()=>[(i(!0),u(y,null,D(w.headers,x=>(i(),v(e(Ye),{key:x.id},{default:a(()=>[x.isPlaceholder?H("",!0):(i(),v(e(re),{key:0,render:x.column.columnDef.header,props:x.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(ze),{id:"dbTableBody"},{default:a(()=>{var w;return[(w=e(h).getRowModel().rows)!=null&&w.length?(i(!0),u(y,{key:0},D(e(h).getRowModel().rows,x=>(i(),v(e(X),{key:x.id,"data-state":x.getIsSelected()&&"selected"},{default:a(()=>[(i(!0),u(y,null,D(x.getVisibleCells(),g=>(i(),v(e(ie),{key:g.id},{default:a(()=>[t(e(re),{render:g.column.columnDef.cell,props:g.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(i(),v(e(X),{key:1},{default:a(()=>[t(e(ie),{colspan:_.columns.length,class:"h-24 text-center"},{default:a(()=>[m(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),t(ht,{table:e(h)},null,8,["table"])]))}}),kt={class:"flex sm:flex-row sm gap-4 flex-col w-full"},Vt="/api/transaction/card",Dt=z({__name:"DashboardCard",setup(n){const s=oe({scheduled_reminders:0,active_debts:0,active_debts_amount:"0.00",settled_debts_amount:"0.00"}),o=async()=>{try{const l=await ae.get(Vt);Object.assign(s,l.data.Result)}catch{}};return $e(()=>{o()}),(l,r)=>(i(),u("div",kt,[t(e(G),{class:"w-full md:w-1/3"},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(W),null,{default:a(()=>[m(p(s.scheduled_reminders),1)]),_:1}),t(e(E),null,{default:a(()=>[m("Scheduled Reminder(s)")]),_:1})]),_:1})]),_:1}),t(e(G),{class:"w-full md:w-1/3"},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(W),null,{default:a(()=>[m(p(s.active_debts),1)]),_:1}),t(e(E),null,{default:a(()=>[m("Active Debt(s)")]),_:1})]),_:1})]),_:1}),t(e(G),{class:"w-full md:w-1/3"},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(W),null,{default:a(()=>[m("RM "+p(s.active_debts_amount),1)]),_:1}),t(e(E),null,{default:a(()=>[m("Active Debt Amount")]),_:1})]),_:1})]),_:1}),t(e(G),{class:"w-full md:w-1/3"},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(W),null,{default:a(()=>[m("RM "+p(s.settled_debts_amount),1)]),_:1}),t(e(E),null,{default:a(()=>[m("Settled Debt")]),_:1})]),_:1})]),_:1})]))}}),Mt={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Ft={class:"flex flex-col gap-4"},It={class:"flex items-center justify-between"},Rt={class:"flex flex-col gap-4"},Lt={class:"flex items-center justify-between"},Pt=z({__name:"DateRangeFilter",setup(n){const s=ne("tableStore",J("dashboard")),o=new se(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),l=S({start:new se(2024,5,20).subtract({months:3}),end:o}),r=oe({date:l.value}),{toast:d}=xe(),$=()=>{s.set_filter(r),s.refresh(s.page_index)};new Ke("en-US",{dateStyle:"medium"}),Z(()=>r.date,g=>{g.end&&($(),d({title:"Transaction dashboard refreshed",variant:"success"}))},{deep:!0});const k=S("en-US"),M=Ee(k.value),h=S(l.value.start),_=S(l.value.end),R=S(Y({dateObj:h.value,locale:k.value,fixedWeeks:!0,weekStartsOn:0})),w=S(Y({dateObj:_.value,locale:k.value,fixedWeeks:!0,weekStartsOn:0}));function x(g,f){g==="first"?h.value=h.value.add({months:f}):_.value=_.value.add({months:f})}return Z(h,g=>{R.value=Y({dateObj:g,weekStartsOn:0,fixedWeeks:!1,locale:k.value}),ce(_.value,g)&&(_.value=_.value.add({months:1}))}),Z(_,g=>{w.value=Y({dateObj:g,weekStartsOn:0,fixedWeeks:!1,locale:k.value}),ce(g,h.value)&&(h.value=h.value.subtract({months:1}))}),(g,f)=>{const L=N("VIcon");return i(),v(e(ke),null,{default:a(()=>[t(e(Se),{"as-child":""},{default:a(()=>[t(e(I),{variant:"outline",class:P(e(T)("w-max-fit justify-start text-left font-normal",!l.value&&"text-muted-foreground"))},{default:a(()=>[t(L,{name:"bi-calendar-fill",class:"mr-2 h-4 w-4"}),l.value.start?(i(),u(y,{key:0},[l.value.end?(i(),u(y,{key:0},[m(p(e(M).custom(e(A)(l.value.start),{dateStyle:"medium"}))+" - "+p(e(M).custom(e(A)(l.value.end),{dateStyle:"medium"})),1)],64)):(i(),u(y,{key:1},[m(p(e(M).custom(e(A)(l.value.start),{dateStyle:"medium"})),1)],64))],64)):(i(),u(y,{key:1},[m(" Pick a date ")],64))]),_:1},8,["class"])]),_:1}),t(e(Ce),{class:"w-auto p-0",align:"end"},{default:a(()=>[t(e(Ge),{modelValue:r.date,"onUpdate:modelValue":f[4]||(f[4]=V=>r.date=V),placeholder:h.value,"onUpdate:placeholder":f[5]||(f[5]=V=>h.value=V),class:"p-3"},{default:a(({weekDays:V})=>[c("div",Mt,[c("div",Ft,[c("div",It,[c("button",{class:P(e(T)(e(B)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:f[0]||(f[0]=C=>x("first",-1))},[t(L,{name:"fa-chevron-left",class:"size-4"})],2),c("div",{class:P(e(T)("text-sm font-medium"))},p(e(M).fullMonthAndYear(e(A)(R.value.value))),3),c("button",{class:P(e(T)(e(B)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:f[1]||(f[1]=C=>x("first",1))},[t(L,{name:"fa-chevron-right",class:"size-4"})],2)]),t(e(ue),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(q),null,{default:a(()=>[(i(!0),u(y,null,D(V,C=>(i(),v(e(_e),{key:C,class:"w-full"},{default:a(()=>[m(p(C),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(me),null,{default:a(()=>[(i(!0),u(y,null,D(R.value.rows,(C,Q)=>(i(),v(e(q),{key:`weekDate-${Q}`,class:"mt-2 w-full"},{default:a(()=>[(i(!0),u(y,null,D(C,U=>(i(),v(e(ge),{key:U.toString(),date:U},{default:a(()=>[t(e(pe),{day:U,month:R.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)]),c("div",Rt,[c("div",Lt,[c("button",{class:P(e(T)(e(B)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:f[2]||(f[2]=C=>x("second",-1))},[t(L,{name:"fa-chevron-left",class:"size-4"})],2),c("div",{class:P(e(T)("text-sm font-medium"))},p(e(M).fullMonthAndYear(e(A)(w.value.value))),3),c("button",{class:P(e(T)(e(B)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:f[3]||(f[3]=C=>x("second",1))},[t(L,{name:"fa-chevron-right",class:"size-4"})],2)]),t(e(ue),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(q),null,{default:a(()=>[(i(!0),u(y,null,D(V,C=>(i(),v(e(_e),{key:C,class:"w-full"},{default:a(()=>[m(p(C),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(me),null,{default:a(()=>[(i(!0),u(y,null,D(w.value.rows,(C,Q)=>(i(),v(e(q),{key:`weekDate-${Q}`,class:"mt-2 w-full"},{default:a(()=>[(i(!0),u(y,null,D(C,U=>(i(),v(e(ge),{key:U.toString(),date:U},{default:a(()=>[t(e(pe),{day:U,month:w.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)])])]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})}}}),j=z({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(n){return(s,o)=>{const l=N("VIcon");return s.column.getCanSort()?(i(),u("div",{key:0,class:P(e(T)("flex items-center space-x-2",s.$attrs.class??""))},[t(e(ye),null,{default:a(()=>[t(e(we),{"as-child":""},{default:a(()=>[t(e(I),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:a(()=>[c("span",null,p(s.title),1),s.column.getIsSorted()==="desc"?(i(),v(l,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):s.column.getIsSorted()==="asc"?(i(),v(l,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(i(),v(l,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),t(e(be),{align:"start"},{default:a(()=>[t(e(ee),{onClick:o[0]||(o[0]=r=>s.column.toggleSorting(!1))},{default:a(()=>[t(l,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Asc ")]),_:1}),t(e(ee),{onClick:o[1]||(o[1]=r=>s.column.toggleSorting(!0))},{default:a(()=>[t(l,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Desc ")]),_:1}),t(e(he)),t(e(ee),{onClick:o[2]||(o[2]=r=>s.column.toggleVisibility(!1))},{default:a(()=>[t(l,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(i(),u("div",{key:1,class:P(s.$attrs.class)},p(s.title),3))}}}),zt=F.object({id:F.number(),invoice:F.string(),customer_name:F.string().min(2).max(50),event_display:F.string(),scheduled_date:F.preprocess(n=>typeof n=="string"?new Date(n):n,F.date()),status:F.string(),additional_info:F.string(),change_info:F.string().nullable(),editable:F.boolean()}),Tt={class:"grid gap-4 py-4"},Ut={class:"grid grid-cols-4 items-center gap-4"},jt={class:"grid grid-cols-4 items-center gap-4"},At={class:"col-span-3"},Ht={key:0,class:"grid grid-cols-4 items-center gap-4"},Nt=z({__name:"DataTableEditScheduleModal",props:{row:{}},setup(n){const s=ne("tableStore",J("transaction")),o=n,l=oe({id:o.row.id,invoice:o.row.invoice,scheduled_date:null}),r=S(!1),d=S(!1),$=S(null),{toast:k}=xe(),M=st(new Date,1),h=new se(M.getFullYear(),M.getMonth()+1,M.getDate());async function _(){try{const g=await ae.get(`/api/transaction/${o.row.id}/scheduled_date`);if(Object.assign(l,g.data.Result),g.data.Result.scheduled_date){const f=ot(g.data.Result.scheduled_date);l.scheduled_date=ve(f,"yyyy-MM-dd")}else l.scheduled_date=null;console.log(l.scheduled_date)}catch{k({title:"Whoops, something went wrong",description:"There was an error in initialising the form",variant:"destructive"})}finally{r.value=!1}}async function R(){r.value=!0;try{const g=await ae.patch(`/api/transaction/${o.row.id}/scheduled_date`,{...l},{headers:{"Content-Type":"multipart/form-data"}});w(),await s.refresh(s.page_index),k({title:g.data.Result,variant:"success"})}catch{k({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{r.value=!1}}function w(){d.value=!d.value,d.value&&_()}function x(g){const f=new Date(g);l.scheduled_date=ve(f,"yyyy-MM-dd")}return(g,f)=>{const L=N("VIcon");return i(),u("div",null,[c("div",null,[t(e(I),{variant:"default",size:"sm",class:"h-8 lg:flex",onClick:w},{default:a(()=>[t(L,{name:"fa-pen",class:"size-4"})]),_:1})]),t(e(Xe),{open:d.value,"onUpdate:open":f[2]||(f[2]=V=>d.value=V)},{default:a(()=>[t(e(We),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:a(()=>[t(e(qe),null,{default:a(()=>[t(e(Je),null,{default:a(()=>[m("Reschedule Reminder")]),_:1})]),_:1}),c("div",Tt,[c("div",Ut,[t(e(te),{for:"invoice",class:"text-right"},{default:a(()=>[m(" Invoice ")]),_:1}),t(e(Ve),{id:"invoice",modelValue:l.invoice,"onUpdate:modelValue":f[0]||(f[0]=V=>l.invoice=V),class:"col-span-3",disabled:""},null,8,["modelValue"])]),c("div",jt,[t(e(te),{for:"email",class:"text-right"},{default:a(()=>[m(" Schedule Date ")]),_:1}),c("div",At,[t(e(ke),null,{default:a(()=>[t(e(Se),{"as-child":""},{default:a(()=>[t(e(I),{variant:"outline",class:P(e(T)("w-full justify-start text-left font-normal",!l.scheduled_date&&"text-muted-foreground"))},{default:a(()=>[t(L,{name:"bi-calendar-fill",class:"mr-2 size-4"}),c("span",null,p(l.scheduled_date??"Select a date"),1)]),_:1},8,["class"])]),_:1}),t(e(Ce),{class:"w-auto p-0"},{default:a(()=>[t(e(nt),{mode:"date","min-value":e(h),"onUpdate:modelValue":f[1]||(f[1]=V=>x(V)),masks:{L:"YYYY-MM-DD"},modelConfig:{type:"string",mask:"YYYY/MM/DD"},"is-required":""},null,8,["min-value"])]),_:1})]),_:1})])])]),t(Qe),$.value?(i(),u("div",Ht,[t(e(te),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:a(()=>[t(L,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),m(" "+p($.value),1)]),_:1})])):H("",!0),t(e(lt),{class:"flex justify-end"},{default:a(()=>[t(e(I),{type:"submit",onClick:R,disabled:r.value},{default:a(()=>[r.value?(i(),v(L,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):H("",!0),m(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),Ot={class:"flex gap-1"},Yt=z({__name:"DataTableRowActions",props:{row:{}},setup(n){const s=n,o=le(()=>zt.parse(s.row.original));return(l,r)=>(i(),u("div",Ot,[o.value.editable?(i(),v(Nt,{key:0,row:o.value},null,8,["row"])):H("",!0)]))}}),Bt=[{id:"select",header:({table:n})=>b(de,{checked:n.getIsAllPageRowsSelected()||n.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":s=>n.toggleAllPageRowsSelected(!!s),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:n})=>b(de,{checked:n.getIsSelected(),"onUpdate:checked":s=>n.toggleSelected(!!s),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1,meta:{title:"Select"}},{accessorKey:"invoice",header:({column:n})=>b(j,{column:n,title:"Invoice"}),cell:({row:n})=>b("div",{class:"w-20"},n.getValue("invoice")),enableSorting:!0,enableHiding:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())??"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Invoice"}},{accessorKey:"customer_name",header:({column:n})=>b(j,{column:n,title:"Customer"}),cell:({row:n})=>b("div",{class:"w-fit"},n.getValue("customer_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())??"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Customer"}},{accessorKey:"event_display",header:({column:n})=>b(j,{column:n,title:"Event Type"}),cell:({row:n})=>b("div",{class:"w-fit"},n.getValue("event_display")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())??"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Event Type"}},{accessorKey:"scheduled_date",header:({column:n})=>b(j,{column:n,title:n.columnDef.meta.title}),cell:({row:n})=>{const s=n.getValue("scheduled_date");let o="";if(s){const l=new Date(Date.parse(s));isNaN(l.getTime())?o="Not Provided":o=l.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}else o="Not provided";return b("div",{class:`w-fit ${o!="Not Provided"?"":"text-red-600 font-bold"}`},o)},enableSorting:!0,enableHiding:!0,meta:{title:"Scheduled Date"}},{accessorKey:"status",header:({column:n})=>b(j,{column:n,title:"Status"}),cell:({row:n})=>b("div",{class:"w-fit"},n.getValue("status")),enableSorting:!0,enableHiding:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())||"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Status"}},{accessorKey:"additional_info",header:({column:n})=>b(j,{column:n,title:"Additional Info"}),cell:({row:n})=>b("div",{class:"w-fit"},n.getValue("additional_info")),enableSorting:!0,enableHiding:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())||"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Additional Info"}},{accessorKey:"change_info",header:({column:n})=>b(j,{column:n,title:"Change Info"}),cell:({row:n})=>b("div",{class:"w-44"},n.getValue("change_info")),enableSorting:!0,enableHiding:!0,filterFn:(n,s,o)=>{var d;const l=((d=n.getValue(s))==null?void 0:d.toString().toLowerCase())||"",r=o==null?void 0:o.toString().toLowerCase();return l.includes(r)},meta:{title:"Change Info"}},{id:"actions",cell:({row:n})=>b(Yt,{row:n})}],Kt={class:"p-4 md:p-8 space-y-8 h-full"},Et={class:"flex flex-col md:flex-row items-start md:items-center justify-start md:justify-between space-y-2"},Gt=c("div",null,[c("h2",{class:"text-2xl font-bold tracking-tight"},"Dashboard")],-1),Wt={key:0,class:"text-center"},qt={key:1},Jt="/api/transaction",ca=z({__name:"Dashboard",setup(n){const s=J("dashboard"),o=l=>({id:l.id,invoice:l.invoice,customer_name:l.customer_name,event_display:l.event_display,scheduled_date:l.scheduled_date,status:l.status_display,additional_info:l.additional_info,change_info:l.change_info,editable:l.editable});return $e(async()=>{await s.fetch(Jt,0,o)}),et("tableStore",s),Ze(()=>{s.$reset()}),(l,r)=>{const d=N("VIcon");return i(),u("div",Kt,[c("div",Et,[Gt,t(Pt)]),t(Dt),e(s).is_loading?(i(),u("div",Wt,[t(d,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-10 h-10"})])):(i(),u("div",qt,[t(Ct,{data:e(s).tasks,columns:e(Bt)},null,8,["data","columns"])]))])}}});export{ca as default};
