import{_ as Re,a as Le,b as Pe,c as je,d as Ue,e as xe,u as Q,f as Te,g as ze,h as Ne,i as ue,j as X,k as Ae,l as He,m as Ye,n as Oe,o as Be,p as Ee,q as Ke,r as Ge,F as fe,z as L,s as me}from"./Checkbox.vue_vue_type_script_setup_true_lang.B1OsCrsj.js";import{e as z,r as B,o as r,c as u,d as c,t as w,a as t,k as s,u as e,F as y,v as F,s as V,b as m,x as de,l as _,y as Se,z as Ce,A as ke,m as O,B as ce,i as k,C as We,D as K,$ as se,E as le,G as Ve,R as qe,H as G,I as Z,J as De,K as Qe,L as ne,M as oe,n as P,g as T,N as ee,O as ie,P as Je,Q as W,S as _e,T as re,U as Xe,V as Ze,W as et,X as tt,Y as at,Z as Me,a0 as pe,a1 as st,a2 as te,a3 as lt,a4 as nt,a5 as ot,_ as ae,a6 as it,a7 as b,a8 as rt,a9 as dt}from"../main.js";import{_ as ct,a as ut}from"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang.CMtdOpeP.js";import{_ as Fe}from"./Input.vue_vue_type_script_setup_true_lang.CydXMrwJ.js";import{_ as ft}from"./lodash.BtnTHUG3.js";import{_ as ge,a as he,b as q,c as we,d as ve,e as be,f as ye,g as mt}from"./RangeCalendarHeadCell.vue_vue_type_script_setup_true_lang.CWhwLAXD.js";import{_ as _t}from"./DialogFooter.vue_vue_type_script_setup_true_lang.CUbi7heN.js";import{_ as pt}from"./CalendarPrevButton.vue_vue_type_script_setup_true_lang.BhXjXo8B.js";import{f as $e}from"./index.BccI3ZLR.js";import{p as gt}from"./index.DeXtphQp.js";import"./index.5qndC0qu.js";const ht={class:"flex items-center justify-between px-2 pb-10"},wt={class:"flex-1 text-sm text-muted-foreground"},vt={class:"flex items-center space-x-6 lg:space-x-8 text-primary"},bt={class:"flex items-center space-x-2"},yt=c("p",{class:"text-sm font-medium"},"Rows per page",-1),$t={class:"flex w-[100px] items-center justify-center text-sm font-medium"},xt={class:"flex items-center space-x-2"},St=c("span",{class:"sr-only"},"Go to first page",-1),Ct=c("span",{class:"sr-only"},"Go to previous page",-1),kt=c("span",{class:"sr-only"},"Go to next page",-1),Vt=c("span",{class:"sr-only"},"Go to last page",-1),Dt=z({__name:"DataTablePagination",props:{table:{}},setup(l){return(a,n)=>{const o=B("VIcon");return r(),u("div",ht,[c("div",wt,w(a.table.getFilteredSelectedRowModel().rows.length)+" of "+w(a.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",vt,[c("div",bt,[yt,t(e(je),{"model-value":`${a.table.getState().pagination.pageSize}`,"onUpdate:modelValue":a.table.setPageSize},{default:s(()=>[t(e(Re),{class:"h-8 w-[70px]"},{default:s(()=>[t(e(Le),{placeholder:`${a.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),t(e(Pe),{side:"top"},{default:s(()=>[(r(),u(y,null,F([10,20,30,40,50],i=>t(e(Ue),{key:i,value:`${i}`},{default:s(()=>[m(w(i),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",$t," Page "+w(a.table.getState().pagination.pageIndex+1)+" of "+w(a.table.getPageCount()),1),c("div",xt,[t(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanPreviousPage(),onClick:n[0]||(n[0]=i=>a.table.setPageIndex(0))},{default:s(()=>[St,t(o,{name:"fa-arrow-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanPreviousPage(),onClick:n[1]||(n[1]=i=>a.table.previousPage())},{default:s(()=>[Ct,t(o,{name:"fa-chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"h-8 w-8 p-0",disabled:!a.table.getCanNextPage(),onClick:n[2]||(n[2]=i=>a.table.nextPage())},{default:s(()=>[kt,t(o,{name:"fa-chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(V),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!a.table.getCanNextPage(),onClick:n[3]||(n[3]=i=>a.table.setPageIndex(a.table.getPageCount()-1))},{default:s(()=>[Vt,t(o,{name:"fa-arrow-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])])])}}}),Mt=z({__name:"DataTableViewOptions",props:{table:{}},setup(l){const a=l;console.log(a.table.getAllColumns());const n=de(()=>a.table.getAllColumns().filter(o=>typeof o.accessorFn<"u"&&o.getCanHide()));return console.log(n),(o,i)=>(r(),_(e(ke),null,{default:s(()=>[t(e(Se),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",size:"sm",class:"ml-auto hidden h-8 lg:flex"},{default:s(()=>[m(" View ")]),_:1})]),_:1}),t(e(Ce),{align:"end",class:"w-[150px]"},{default:s(()=>[t(e(ct),null,{default:s(()=>[m("Toggle columns")]),_:1}),t(e(xe)),(r(!0),u(y,null,F(n.value,d=>(r(),_(e(ut),{key:d.id,class:"capitalize",checked:d.getIsVisible(),"onUpdate:checked":$=>d.toggleVisibility(!!$)},{default:s(()=>{var $;return[m(w((($=d.columnDef.meta)==null?void 0:$.title)||d.id),1)]}),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1})]),_:1}))}}),Ft={class:"flex items-center justify-between"},It={class:"flex flex-1 items-center space-x-2"},Rt=z({__name:"DataTableToolbar",props:{table:{}},setup(l){const a=l,n=de(()=>a.table.getState().columnFilters.length>0);return(o,i)=>{var d;return r(),u("div",Ft,[c("div",It,[t(e(Fe),{placeholder:"Search invoice...","model-value":((d=o.table.getColumn("invoice"))==null?void 0:d.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:i[0]||(i[0]=$=>o.table.setGlobalFilter($.target.value))},null,8,["model-value"]),n.value?(r(),_(e(V),{key:0,variant:"ghost",class:"h-8 px-2 lg:px-3",onClick:i[1]||(i[1]=$=>o.table.resetColumnFilters())},{default:s(()=>[m(" Reset ")]),_:1})):O("",!0)]),t(Mt,{table:o.table},null,8,["table"])])}}}),Lt={class:"space-y-4 text-muted-foreground"},Pt={class:"rounded-md border"},jt=z({__name:"DataTable",props:{columns:{},data:{}},setup(l){const a=ce("tableStore",Q("transaction")),n=l,o=k([]),i=k([]),d=k({}),$=k({pageIndex:a.page_index,pageSize:a.page_size}),j=k();function R(f,D){let g;typeof f=="function"?g=f(D.value):g=f,D.value=g,a.set_page_index(g.pageIndex),a.set_page_size(g.pageSize)}const I=Te({get data(){return n.data},get columns(){return n.columns},state:{get sorting(){return o.value},get columnFilters(){return i.value},get columnVisibility(){return d.value},get rowSelection(){return j.value},get pagination(){return $.value}},enableRowSelection:!0,onSortingChange:f=>K(f,o),onPaginationChange:f=>R(f,$),onColumnFiltersChange:f=>K(f,i),onColumnVisibilityChange:f=>K(f,d),onRowSelectionChange:f=>K(f,j),getCoreRowModel:He(),getFilteredRowModel:Ye(),getPaginationRowModel:Oe(),getSortedRowModel:Be(),getFacetedRowModel:Ee(),getFacetedUniqueValues:Ke()});return We(()=>{I.setPageIndex(a.page_index),I.setPageSize(a.page_size)}),(f,D)=>(r(),u("div",Lt,[t(Rt,{table:e(I)},null,8,["table"]),c("div",Pt,[t(e(Ae),{class:"text-xs"},{default:s(()=>[t(e(ze),null,{default:s(()=>[(r(!0),u(y,null,F(e(I).getHeaderGroups(),g=>(r(),_(e(X),{key:g.id},{default:s(()=>[(r(!0),u(y,null,F(g.headers,x=>(r(),_(e(Ge),{key:x.id},{default:s(()=>[x.isPlaceholder?O("",!0):(r(),_(e(fe),{key:0,render:x.column.columnDef.header,props:x.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Ne),{id:"dbTableBody"},{default:s(()=>{var g;return[(g=e(I).getRowModel().rows)!=null&&g.length?(r(!0),u(y,{key:0},F(e(I).getRowModel().rows,x=>(r(),_(e(X),{key:x.id,"data-state":x.getIsSelected()&&"selected"},{default:s(()=>[(r(!0),u(y,null,F(x.getVisibleCells(),v=>(r(),_(e(ue),{key:v.id},{default:s(()=>[t(e(fe),{render:v.column.columnDef.cell,props:v.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(r(),_(e(X),{key:1},{default:s(()=>[t(e(ue),{colspan:f.columns.length,class:"h-24 text-center"},{default:s(()=>[m(" No results. ")]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),t(Dt,{table:e(I)},null,8,["table"])]))}}),Ut={class:"border border-secondary rounded p-4"},Tt={class:"flex flex-col gap-4"},zt={class:"flex flex-row gap-x-2 justify-items-center items-center mx-auto w-full"},Nt=c("div",{class:"w-1/3 text-right my-auto"},[c("p",null,"Schduled Date")],-1),At={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Ht={class:"flex flex-col gap-4"},Yt={class:"flex items-center justify-between"},Ot={class:"flex flex-col gap-4"},Bt={class:"flex items-center justify-between"},Et={class:"flex flex-row gap-x-2 justify-items-center items-center mx-auto w-full"},Kt=c("div",{class:"w-1/3 text-right my-auto"},[c("p",null,"Company")],-1),Gt={class:"flex self-end justify-end justify-self-end"},Wt={class:"flex justify-end space-x-2"},qt=z({__name:"DashboardCard",setup(l){const a=ce("tableStore",Q("session")),n=new se(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),o=k({start:new se(2024,5,20).subtract({months:3}),end:n}),i=le({date:o.value,company:null}),d=le({is_loading:!1,is_open:!1,data:[{value:"",label:""}]}),{toast:$}=Ve(),j=k(""),R=k("en-US"),I=qe(R.value),f=k(i.date.start),D=k(i.date.end),g=k(G({dateObj:f.value,locale:R.value,fixedWeeks:!0,weekStartsOn:0})),x=k(G({dateObj:D.value,locale:R.value,fixedWeeks:!0,weekStartsOn:0}));async function v(S){d.is_loading=!0;try{const p=await ne.get(`/api/company/list?search=${S||""}`,{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});d.data=p.data.Result}catch{$({title:"Whoops, something went wrong",description:"There is an error fetching the companies.",variant:"destructive"})}finally{d.is_loading=!1}}Z(j,ft.debounce(async S=>{await v(S)},300));const M=()=>{a.set_filter(i),a.refresh(a.page_index)},Y=()=>{a.set_filter({}),a.refresh(a.page_index)};De(()=>{v()});const U=new Qe("en-US",{dateStyle:"medium"});function E(S,p){S==="first"?f.value=f.value.add({months:p}):D.value=D.value.add({months:p})}Z(f,S=>{g.value=G({dateObj:S,weekStartsOn:0,fixedWeeks:!1,locale:R.value}),pe(D.value,S)&&(D.value=D.value.add({months:1}))}),Z(D,S=>{x.value=G({dateObj:S,weekStartsOn:0,fixedWeeks:!1,locale:R.value}),pe(S,f.value)&&(f.value=f.value.subtract({months:1}))});function Ie(S){S.id==i.company?i.company=null:i.company=S.id,d.is_open=!1}return(S,p)=>{const N=B("VIcon");return r(),u("div",Ut,[c("div",Tt,[c("div",zt,[Nt,t(e(re),null,{default:s(()=>[t(e(oe),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",class:P(e(T)("w-1/3 justify-start text-left font-normal",!i.date&&"text-muted-foreground"))},{default:s(()=>[t(N,{name:"fa-regular-calendar-alt",class:"mr-2 h-4 w-4"}),i.date.start?(r(),u(y,{key:0},[i.date.end?(r(),u(y,{key:0},[m(w(e(U).format(i.date.start.toDate(e(ee)())))+" - "+w(e(U).format(i.date.end.toDate(e(ee)()))),1)],64)):(r(),u(y,{key:1},[m(w(e(U).format(i.date.start.toDate(e(ee)()))),1)],64))],64)):(r(),u(y,{key:1},[m(" Pick a date ")],64))]),_:1},8,["class"])]),_:1}),t(e(ie),{class:"w-auto p-0"},{default:s(()=>[t(e(Je),{modelValue:i.date,"onUpdate:modelValue":p[4]||(p[4]=h=>i.date=h),placeholder:f.value,"onUpdate:placeholder":p[5]||(p[5]=h=>f.value=h),class:"p-3"},{default:s(({weekDays:h})=>[c("div",At,[c("div",Ht,[c("div",Yt,[c("button",{class:P(e(T)(e(W)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:p[0]||(p[0]=C=>E("first",-1))},[t(N,{name:"fa-chevron-left",class:"h-4 w-4"})],2),c("div",{class:P(e(T)("text-sm font-medium"))},w(e(I).fullMonthAndYear(e(_e)(g.value.value))),3),c("button",{class:P(e(T)(e(W)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:p[1]||(p[1]=C=>E("first",1))},[t(N,{name:"fa-chevron-right",class:"h-4 w-4"})],2)]),t(e(ge),null,{default:s(()=>[t(e(he),null,{default:s(()=>[t(e(q),null,{default:s(()=>[(r(!0),u(y,null,F(h,C=>(r(),_(e(ve),{key:C,class:"w-full"},{default:s(()=>[m(w(C),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(we),null,{default:s(()=>[(r(!0),u(y,null,F(g.value.rows,(C,J)=>(r(),_(e(q),{key:`weekDate-${J}`,class:"mt-2 w-full"},{default:s(()=>[(r(!0),u(y,null,F(C,A=>(r(),_(e(be),{key:A.toString(),date:A},{default:s(()=>[t(e(ye),{day:A,month:g.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)]),c("div",Ot,[c("div",Bt,[c("button",{class:P(e(T)(e(W)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:p[2]||(p[2]=C=>E("second",-1))},[t(N,{name:"fa-chevron-left",class:"h-4 w-4"})],2),c("div",{class:P(e(T)("text-sm font-medium"))},w(e(I).fullMonthAndYear(e(_e)(x.value.value))),3),c("button",{class:P(e(T)(e(W)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100")),onClick:p[3]||(p[3]=C=>E("second",1))},[t(N,{name:"fa-chevron-right",class:"h-4 w-4"})],2)]),t(e(ge),null,{default:s(()=>[t(e(he),null,{default:s(()=>[t(e(q),null,{default:s(()=>[(r(!0),u(y,null,F(h,C=>(r(),_(e(ve),{key:C,class:"w-full"},{default:s(()=>[m(w(C),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(we),null,{default:s(()=>[(r(!0),u(y,null,F(x.value.rows,(C,J)=>(r(),_(e(q),{key:`weekDate-${J}`,class:"mt-2 w-full"},{default:s(()=>[(r(!0),u(y,null,F(C,A=>(r(),_(e(be),{key:A.toString(),date:A},{default:s(()=>[t(e(ye),{day:A,month:x.value.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:1})]),_:2},1024)])])]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),c("div",Et,[Kt,t(e(re),{class:"col-span-1",open:d.is_open,"onUpdate:open":p[7]||(p[7]=h=>d.is_open=h)},{default:s(()=>[t(e(oe),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",role:"combobox","aria-expanded":d.is_open,class:"w-1/3 justify-between px-3",disabled:d.is_loading},{default:s(()=>{var h;return[m(w(i.company?(h=d.data.find(C=>C.id===i.company))==null?void 0:h.label:"Select company")+" ",1),d.is_loading?(r(),_(N,{key:0,name:"fa-circle-notch",animation:"spin",class:"w-4 h-4 mr-2"})):(r(),_(N,{key:1,name:"fa-angle-down",class:"h-4 w-4 shrink-0 opacity-50"}))]}),_:1},8,["aria-expanded","disabled"])]),_:1}),t(e(ie),{class:"w-[500px] p-1"},{default:s(()=>[t(e(Xe),null,{default:s(()=>[t(e(Ze),{class:"h-9",modelValue:j.value,"onUpdate:modelValue":p[6]||(p[6]=h=>j.value=h),placeholder:"Search company..."},null,8,["modelValue"]),t(e(et),null,{default:s(()=>[m("No company found.")]),_:1}),t(e(tt),null,{default:s(()=>[t(e(at),null,{default:s(()=>[(r(!0),u(y,null,F(d.data,h=>(r(),_(e(st),{key:h.id,value:h.value??"",onSelect:()=>Ie(h)},{default:s(()=>[m(w(h.label)+" ",1),t(N,{name:"fa-check",class:P(["ml-auto h-4 w-4",i.company===h.id?"opacity-100":"opacity-0"])},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),c("div",Gt,[t(e(V),{onClick:M,class:"w-[100px]"},{default:s(()=>[m("Filter")]),_:1})]),t(e(Me),{class:"my-3"}),c("div",Wt,[t(e(V),{onClick:Y,class:"w-[100px]"},{default:s(()=>[m("All")]),_:1})])])}}}),H=z({__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(l){return(a,n)=>{const o=B("VIcon");return a.column.getCanSort()?(r(),u("div",{key:0,class:P(e(T)("flex items-center space-x-2",a.$attrs.class??""))},[t(e(ke),null,{default:s(()=>[t(e(Se),{"as-child":""},{default:s(()=>[t(e(V),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:s(()=>[c("span",null,w(a.title),1),a.column.getIsSorted()==="desc"?(r(),_(o,{key:0,name:"fa-arrow-down",class:"ml-2 h-4 w-4"})):a.column.getIsSorted()==="asc"?(r(),_(o,{key:1,name:"fa-arrow-up",class:"ml-2 h-4 w-4"})):(r(),_(o,{key:2,name:"fa-sort",class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),t(e(Ce),{align:"start"},{default:s(()=>[t(e(te),{onClick:n[0]||(n[0]=i=>a.column.toggleSorting(!1))},{default:s(()=>[t(o,{name:"fa-arrow-up",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Asc ")]),_:1}),t(e(te),{onClick:n[1]||(n[1]=i=>a.column.toggleSorting(!0))},{default:s(()=>[t(o,{name:"fa-arrow-down",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Desc ")]),_:1}),t(e(xe)),t(e(te),{onClick:n[2]||(n[2]=i=>a.column.toggleVisibility(!1))},{default:s(()=>[t(o,{name:"fa-regular-eye-slash",class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),m(" Hide ")]),_:1})]),_:1})]),_:1})],2)):(r(),u("div",{key:1,class:P(a.$attrs.class)},w(a.title),3))}}}),Qt=L.object({id:L.number(),invoice:L.string(),customer_name:L.string().min(2).max(50),event_display:L.string(),scheduled_date:L.preprocess(l=>typeof l=="string"?new Date(l):l,L.date()),status:L.string(),additional_info:L.string(),change_info:L.string().nullable(),editable:L.boolean()}),Jt={class:"grid gap-4 py-4"},Xt={class:"grid grid-cols-4 items-center gap-4"},Zt={class:"grid grid-cols-4 items-center gap-4"},ea={class:"col-span-3"},ta={key:0,class:"grid grid-cols-4 items-center gap-4"},aa=z({__name:"DataTableEditScheduleModal",props:{row:{}},setup(l){const a=ce("tableStore",Q("transaction")),n=l,o=le({id:n.row.id,invoice:n.row.invoice,scheduled_date:null}),i=k(!1),d=k(!1),$=k(null),{toast:j}=Ve(),R=mt(new Date,1),I=new se(R.getFullYear(),R.getMonth()+1,R.getDate());async function f(){try{const v=await ne.get(`/api/transaction/${n.row.id}/scheduled_date`);if(Object.assign(o,v.data.Result),v.data.Result.scheduled_date){const M=gt(v.data.Result.scheduled_date);o.scheduled_date=$e(M,"yyyy-MM-dd")}else o.scheduled_date=null;console.log(o.scheduled_date)}catch(v){console.log(v)}finally{i.value=!1}}async function D(){i.value=!0;try{const v=await ne.patch(`/api/transaction/${n.row.id}/scheduled_date`,{...o},{headers:{"Content-Type":"multipart/form-data"}});g(),await a.refresh(a.page_index),j({title:v.data.Result,variant:"success"})}catch{j({title:"Whoops, something went wrong",description:"An unexpected error occurred.",variant:"destructive"})}finally{i.value=!1}}function g(){d.value=!d.value,d.value&&f()}function x(v){const M=new Date(v);o.scheduled_date=$e(M,"yyyy-MM-dd")}return(v,M)=>{const Y=B("VIcon");return r(),u("div",null,[c("div",null,[t(e(V),{variant:"default",size:"sm",class:"hidden h-8 ml-2 lg:flex",onClick:g},{default:s(()=>[t(Y,{name:"fa-pen",class:"size-4"})]),_:1})]),t(e(it),{open:d.value,"onUpdate:open":M[2]||(M[2]=U=>d.value=U)},{default:s(()=>[t(e(lt),{isSideBar:!1,class:"sm:max-w-[700px]"},{default:s(()=>[t(e(nt),null,{default:s(()=>[t(e(ot),null,{default:s(()=>[m("Reschedule Reminder")]),_:1})]),_:1}),c("div",Jt,[c("div",Xt,[t(e(ae),{for:"invoice",class:"text-right"},{default:s(()=>[m(" Invoice ")]),_:1}),t(e(Fe),{id:"invoice",modelValue:o.invoice,"onUpdate:modelValue":M[0]||(M[0]=U=>o.invoice=U),class:"col-span-3",disabled:""},null,8,["modelValue"])]),c("div",Zt,[t(e(ae),{for:"email",class:"text-right"},{default:s(()=>[m(" Schedule Date ")]),_:1}),c("div",ea,[t(e(re),null,{default:s(()=>[t(e(oe),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",class:P(e(T)("w-full justify-start text-left font-normal",!o.scheduled_date&&"text-muted-foreground"))},{default:s(()=>[t(Y,{name:"bi-calendar-fill",class:"mr-2 size-4"}),c("span",null,w(o.scheduled_date??"Select a date"),1)]),_:1},8,["class"])]),_:1}),t(e(ie),{class:"w-auto p-0"},{default:s(()=>[t(e(pt),{mode:"date","min-value":e(I),"onUpdate:modelValue":M[1]||(M[1]=U=>x(U)),masks:{L:"YYYY-MM-DD"},modelConfig:{type:"string",mask:"YYYY/MM/DD"},"is-required":""},null,8,["min-value"])]),_:1})]),_:1})])])]),t(Me),$.value?(r(),u("div",ta,[t(e(ae),{for:"name",class:"text-red-600 col-span-3 col-start-2"},{default:s(()=>[t(Y,{name:"fa-exclamation-triangle",class:"size-4 fill-red-600"}),m(" "+w($.value),1)]),_:1})])):O("",!0),t(e(_t),{class:"flex justify-end"},{default:s(()=>[t(e(V),{type:"submit",onClick:D,disabled:i.value},{default:s(()=>[i.value?(r(),_(Y,{key:0,name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-fit h-fit mr-2"})):O("",!0),m(" Edit")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),sa={class:"flex gap-1"},la=z({__name:"DataTableRowActions",props:{row:{}},setup(l){const a=l,n=de(()=>Qt.parse(a.row.original));return(o,i)=>(r(),u("div",sa,[n.value.editable?(r(),_(aa,{key:0,row:n.value},null,8,["row"])):O("",!0)]))}}),na=[{id:"select",header:({table:l})=>b(me,{checked:l.getIsAllPageRowsSelected()||l.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":a=>l.toggleAllPageRowsSelected(!!a),ariaLabel:"Select all",class:"translate-y-0.5"}),cell:({row:l})=>b(me,{checked:l.getIsSelected(),"onUpdate:checked":a=>l.toggleSelected(!!a),ariaLabel:"Select row",class:"translate-y-0.5"}),enableSorting:!1,enableHiding:!1,meta:{title:"Select"}},{accessorKey:"invoice",header:({column:l})=>b(H,{column:l,title:"Invoice"}),cell:({row:l})=>b("div",{class:"w-20"},l.getValue("invoice")),enableSorting:!0,enableHiding:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Invoice"}},{accessorKey:"customer_name",header:({column:l})=>b(H,{column:l,title:"Customer"}),cell:({row:l})=>b("div",{class:"w-fit"},l.getValue("customer_name")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Customer"}},{accessorKey:"event_display",header:({column:l})=>b(H,{column:l,title:"Event Type"}),cell:({row:l})=>b("div",{class:"w-fit"},l.getValue("event_display")),enableSorting:!0,enableHiding:!0,enableColumnFilter:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())??"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Event Type"}},{accessorKey:"scheduled_date",header:({column:l})=>b(H,{column:l,title:l.columnDef.meta.title}),cell:({row:l})=>{const a=l.getValue("scheduled_date");let n="";if(a){const o=new Date(Date.parse(a));isNaN(o.getTime())?n="Not Provided":n=o.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}else n="Not provided";return b("div",{class:`w-fit ${n!="Not Provided"?"":"text-red-600 font-bold"}`},n)},enableSorting:!0,enableHiding:!0,meta:{title:"Scheduled Date"}},{accessorKey:"status",header:({column:l})=>b(H,{column:l,title:"Status"}),cell:({row:l})=>b("div",{class:"w-fit"},l.getValue("status")),enableSorting:!0,enableHiding:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Status"}},{accessorKey:"additional_info",header:({column:l})=>b(H,{column:l,title:"Additional Info"}),cell:({row:l})=>b("div",{class:"w-fit"},l.getValue("additional_info")),enableSorting:!0,enableHiding:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Additional Info"}},{accessorKey:"change_info",header:({column:l})=>b(H,{column:l,title:"Change Info"}),cell:({row:l})=>b("div",{class:"w-44"},l.getValue("change_info")),enableSorting:!0,enableHiding:!0,filterFn:(l,a,n)=>{var d;const o=((d=l.getValue(a))==null?void 0:d.toString().toLowerCase())||"",i=n==null?void 0:n.toString().toLowerCase();return o.includes(i)},meta:{title:"Change Info"}},{id:"actions",cell:({row:l})=>b(la,{row:l})}],oa={class:"p-8 space-y-8 h-full"},ia=c("div",{class:"flex items-center justify-between space-y-2"},[c("div",null,[c("h2",{class:"text-2xl font-bold tracking-tight"},"Dashboard")])],-1),ra={key:0,class:"text-center"},da={key:1},ca="/api/transaction",$a=z({__name:"Dashboard",setup(l){const a=Q("dashboard"),n=o=>({id:o.id,invoice:o.invoice,customer_name:o.customer_name,event_display:o.event_display,scheduled_date:o.scheduled_date,status:o.status_display,additional_info:o.additional_info,change_info:o.change_info,editable:o.editable});return De(async()=>{await a.fetch(ca,0,n)}),dt("tableStore",a),rt(()=>{a.$reset()}),(o,i)=>{const d=B("VIcon");return r(),u("div",oa,[ia,t(qt),e(a).is_loading?(r(),u("div",ra,[t(d,{name:"fa-circle-notch",animation:"spin",speed:"slow",class:"w-10 h-10"})])):(r(),u("div",da,[t(jt,{data:e(a).tasks,columns:e(na)},null,8,["data","columns"])]))])}}});export{$a as default};
